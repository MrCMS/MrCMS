@using MrCMS.Helpers
@using IFileAdminService = MrCMS.Web.Areas.Admin.Services.IFileAdminService
@using MediaToolsACL = MrCMS.Web.Areas.Admin.ACL.MediaToolsACL
@model MrCMS.Web.Areas.Admin.Models.MediaCategorySearchModel
@inject IFileAdminService FileAdminService
@{
    Html.IncludeScript("~/Areas/Admin/scripts/media-uploader.js");
    Html.IncludeScript("~/Areas/Admin/scripts/media-category.js");
    Html.IncludeScript("~/Areas/Admin/scripts/media.js");
    var category = FileAdminService.GetCategory(Model);
    var sortByOptions = FileAdminService.GetSortByOptions(Model);
    bool canAccessMediaToolsCut = await Html.CanAccess<MediaToolsACL>(MediaToolsACL.Cut);
    bool canAccessMediaToolsDelete = await Html.CanAccess<MediaToolsACL>(MediaToolsACL.Delete);
}

<div class="mb-3">
    <partial name="Upload" model="category" />
</div>

@using (Html.BeginForm(FormMethod.Get, new { }))
{
    <div class="row">
        <div class="col-sm-6">
            <div class="form-group">
                @Html.LabelFor(model => model.SearchText)
                @Html.TextBoxFor(model => model.SearchText, new { @class = "form-control" })
            </div>
        </div>
        <div class="col-sm-4">
            <div class="form-group">
                @Html.LabelFor(model => model.SortBy)
                @Html.DropDownListFor(model => model.SortBy, sortByOptions, new { @class = "form-control" })
            </div>
        </div>
        <div class="col-sm-2">
            <div class="form-group">
                <label class="hidden-xs">&nbsp;</label>
                <button type="submit" class="btn btn-outline-primary form-control">@Html.Resource("Search")</button>
            </div>
        </div>
    </div>
}

@if (canAccessMediaToolsCut || canAccessMediaToolsDelete)
{
    <span class="btn-group mb-3" id="file-tools">
        @{
            if (canAccessMediaToolsCut)
            {
                <button id="cut-files" class="btn btn-secondary" disabled>@Html.Resource("Cut")</button>
            }
            <button id="paste-files" class="btn btn-secondary" disabled>@Html.Resource("Paste")</button>
            if (canAccessMediaToolsDelete)
            {
                <button id="delete-files" class="btn btn-secondary" disabled>@Html.Resource("Delete")</button>
            }
            <button id="clear-files" class="btn btn-secondary">@Html.Resource("Clear")</button>
        }
    </span>
}

<partial name="Directory" model="Model" />