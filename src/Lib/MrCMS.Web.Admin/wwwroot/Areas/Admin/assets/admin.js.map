{"mappings":"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","sources":["wwwroot/Areas/Admin/Content/scripts/post-to-url.js","wwwroot/Areas/Admin/Content/scripts/setup-confirmation.js","wwwroot/Areas/Admin/Content/scripts/async-paging.js","wwwroot/Areas/Admin/Content/scripts/setup-featherlight.js","wwwroot/Areas/Admin/Content/scripts/media-uploader.js","wwwroot/Areas/Admin/Content/scripts/initialize-plugins.js","wwwroot/Areas/Admin/Content/scripts/tagging.js","wwwroot/Areas/Admin/Content/scripts/sort.js","wwwroot/Areas/Admin/Content/scripts/resize-modal.js","wwwroot/Areas/Admin/Content/scripts/media-selector.js","wwwroot/Areas/Admin/Content/scripts/health-checks.js","wwwroot/Areas/Admin/Content/scripts/update-area.js","wwwroot/Areas/Admin/Content/scripts/add-webpage.js","wwwroot/Areas/Admin/Content/scripts/tree-setup.js","wwwroot/Areas/Admin/Content/scripts/edit-webpage.js","wwwroot/Areas/Admin/Content/scripts/media.js","wwwroot/Areas/Admin/Content/scripts/media-category.js","wwwroot/Areas/Admin/Content/scripts/menu.js","wwwroot/Areas/Admin/Content/scripts/sticky-tabs.js","wwwroot/Areas/Admin/Content/scripts/user-avatar.js","wwwroot/Areas/Admin/Content/scripts/transient-notifications.js","wwwroot/Areas/Admin/Content/scripts/persistent-notifications.js","wwwroot/Areas/Admin/Content/scripts/add-category.js","wwwroot/Areas/Admin/Content/scripts/message-template.js","wwwroot/Areas/Admin/Content/scripts/add-page-template.js","wwwroot/Areas/Admin/Content/scripts/add-page-widget.js","wwwroot/Areas/Admin/Content/scripts/media-show-files-simple.js","wwwroot/Areas/Admin/Content/scripts/add-site.js","wwwroot/Areas/Admin/Content/scripts/choose-site.js","wwwroot/Areas/Admin/Content/scripts/webpage-search.js","wwwroot/Areas/Admin/Content/scripts/content-admin.js","wwwroot/Areas/Admin/Content/scripts/ajax-config.js","wwwroot/Areas/Admin/Content/scripts/admin.js","wwwroot/Areas/Admin/Content/scripts/batch.js","wwwroot/Areas/Admin/Content/scripts/initialize-bootstrap-plugins.js","wwwroot/Areas/Admin/Content/scripts/setup-globalisation.js","wwwroot/Areas/Admin/Content/scripts/delay-keyup.js","wwwroot/Areas/Admin/Content/scripts/pages.js","wwwroot/Areas/Admin/Content/scripts/layout.js","wwwroot/Areas/Admin/Content/scripts/setup-jquery-ui.js","wwwroot/Areas/Admin/Content/scripts/user-registrations-report.js","wwwroot/Areas/Admin/Content/scripts/search.js","wwwroot/Areas/Admin/Content/scripts/form-builder.js","wwwroot/Areas/Admin/Content/scripts/form-sort.js"],"sourcesContent":["export function postToUrl(path, params, method) {\n    method = method || \"post\"; // Set method to post by default, if not specified.\n\n    // The rest of this code assumes you are not using a library.\n    // It can be made less wordy if you use one.\n    var form = document.createElement(\"form\");\n    form.setAttribute(\"method\", method);\n    form.setAttribute(\"action\", path);\n    form.setAttribute(\"id\", \"temp-form\");\n\n    for (var key in params) {\n        var hiddenField = document.createElement(\"input\");\n        hiddenField.setAttribute(\"type\", \"hidden\");\n        hiddenField.setAttribute(\"name\", key);\n        hiddenField.setAttribute(\"value\", params[key]);\n\n        form.appendChild(hiddenField);\n    }\n\n    let value = $('body').data('antiforgery-token');\n    if (value) {\n        var antiForgery = document.createElement(\"input\");\n        antiForgery.setAttribute(\"type\", \"hidden\")\n        antiForgery.setAttribute(\"name\", \"__RequestVerificationToken\")\n        antiForgery.setAttribute('value', value)\n        form.appendChild(antiForgery);\n    }\n\n    document.body.appendChild(form);\n    form.submit();\n}\n\nexport function registerPostToUrl() {\n    window.postToUrl = postToUrl;\n}\n\nexport function postToUrlHelper() {\n    $('[data-action=post-link]').click(function (e) {\n        e.preventDefault();\n        var self = $(this);\n        var url = self.attr('href') || self.data('link');\n        if (url != null) {\n            postToUrl(url, {}, 'post');\n        }\n    });\n}","import {postToUrl} from \"./post-to-url\";\n\nexport function setupConfirmation() {\n    \n    \n    $('[data-toggle=confirmation]').confirmation().on('click', function (e) {\n        e.preventDefault();\n        deleteFromConfirmation(e.target);\n    });\n\n    function deleteFromConfirmation(el) {\n        const deleteUrl = $(el).data('value');\n        const id = $(el).data('id');\n        postToUrl(deleteUrl, {id: id});\n    }\n}\n","﻿export function setupAsyncPaging() {\n\n    $(document).on('click', 'div[data-paging-type=\"async\"] .pagination a[href]', getResults);\n    $(document).on('click', 'div[data-paging-type=\"async\"] button[data-action=update]', updateResults);\n}\n\nfunction getResults(event) {\n    event.preventDefault();\n    const self = $(event.target);\n    $.get(this.href, function (response) {\n        self.parents('div[data-paging-type=\"async\"]').replaceWith(response);\n    });\n}\n\nfunction updateResults(event) {\n    event.preventDefault();\n    const self = $(event.target);\n    const data = self.parents('div[data-paging-type=\"async\"]').find('input, select, textarea').serialize();\n    $.get($(this).data('url'), data, function (response) {\n        self.parents('div[data-paging-type=\"async\"]').replaceWith(response);\n    });\n    return false;\n}","const MrCMSFeatherlightSettings = {\n    type: 'iframe',\n    iframeWidth: 800,\n    afterOpen: function () {\n        setCloseButtonPosition(this.$instance);\n    },\n    beforeOpen: function () {\n    },\n    onResize: function () {\n        if (this.autoHeight) {\n            // Shrink:\n            this.$content.css('height', '10px');\n            // Then set to the full height:\n            this.$content.css('height', this.$content.contents().find('body')[0].scrollHeight);\n        }\n        setCloseButtonPosition(this.$instance);\n    }\n};\n\nexport function setCloseButtonPosition(contents) {\n    const offset = contents.find(\".featherlight-content\").offset();\n    const scrollTop = $(document).scrollTop();\n    contents.find(\".featherlight-close-icon\").css('top', offset.top - scrollTop);\n    contents.find(\".featherlight-close-icon\").css('right', offset.left - 20);\n}\n\nexport function getRemoteModel(href) {\n    const link = $(\"<a>\");\n    link.attr('href', href);\n    link.attr('data-toggle', 'fb-modal');\n    const settings = {};\n    link.featherlight(MrCMSFeatherlightSettings).click();\n}\n\nexport function setupFeatherlight() {\n    const featherlightSettings = $.extend({}, MrCMSFeatherlightSettings, {\n        filter: '[data-toggle=\"fb-modal\"]'\n    });\n    $(document).featherlight(featherlightSettings);\n}\n","﻿const uploader = function (el, options) {\n    const element = el;\n    let requestVerificationToken = $('body').data('antiforgery-token');\n    const settings = $.extend(defaults, options);\n    let self;\n    return {\n        init: function () {\n            self = this;\n            const upload = element.find(settings.fileUploadSelector);\n            if (upload.length) {\n                const acceptFileTypes = settings.acceptFileTypes(element);\n                const val = element.find(settings.uploadUrlSelector).val();\n                const dropZoneElement = upload.get()[0];\n\n                let maxFileSize = settings.maxFilesize(element);\n                // clear it and start again if it's being re-initialized\n                try {\n                    window.Dropzone.forElement(dropZoneElement).destroy();\n                } catch {\n                }\n                const myDropzone = new window.Dropzone(dropZoneElement, {\n                    url: val,\n                    acceptedFiles: acceptFileTypes,\n                    timeout: 120000,\n                    maxFilesize: maxFileSize,\n                    dictDefaultMessage: upload.data('message'),\n                    parallelUploads: 1,\n                    headers: {\n                        'RequestVerificationToken': requestVerificationToken\n                    }\n                });\n\n\n                myDropzone.on(\"queuecomplete\", function (file) {\n                    settings.onFileUploadStopped(file, myDropzone);\n                    element.find(settings.progressBarSelector).hide();\n                    $(document).trigger('update-area', 'media-folder');\n                });\n\n                myDropzone.on(\"totaluploadprogress\", this.progressBar);\n\n                myDropzone.on(\"error\", self.showMessage);\n            }\n\n            return self;\n        },\n        progressBar: function (totalPercentage, totalBytesToBeSent, totalBytesSent) {\n            element.find(settings.progressBarSelector).show();\n            element.find(settings.progressBarSelectorInner).css('width', totalPercentage + '%');\n            element.find(settings.percentCompleteSelector).html(parseInt(totalPercentage) + '%');\n\n        },\n        showMessage: function (file, response) {\n            noty({\n                text: '<div class=\"notification-date\">' + file.status + '</div><div class=\"notification-msg\">' + response + \"</div>\",\n                layout: 'bottomRight',\n                timeout: 8000,\n                type: \"error\"\n            });\n        },\n    };\n};\nconst defaults = {\n    fileUploadSelector: \"#fileupload\",\n    acceptFileTypes: function (element) {\n        const allowedFileTypes = element.find(\"#allowedFileTypes\").val();\n        if (allowedFileTypes != null) {\n            return allowedFileTypes;\n        }\n        return \".jpg, .png\";\n    },\n    maxFilesize: function (element) {\n        const maxFileSize = element.find(\"#maxFileSizeUpload\").val();\n        if (maxFileSize != null) {\n            return parseInt(maxFileSize) / 1024 / 1024;\n        }\n        return 100;\n    },\n    sequentialUploads: true,\n    progressBarSelector: \"#progress\",\n    progressBarSelectorInner: \"#progress .progress-bar\",\n    percentCompleteSelector: \"#progress .progress-bar\",\n    filesSelector: \"#mrcmsfiles\",\n    uploadUrlSelector: \"#action-url\",\n    uploadMediaCategoryIdSelector: \"#action-category-id\",\n    onFileUploadStopped: function (file) {\n    }\n};\n\nexport function initMediaUploader() {\n    window.MediaUploader = uploader;\n    window.MediaUploader.defaults = defaults;\n}\n\nexport const MediaUploader = uploader;","import {initTagging} from \"./tagging\";\nimport {initSortable} from \"./sort\";\nimport {initMediaUploader} from \"./media-uploader\";\n\nexport function initializePlugins() {\n    CKEDITOR.replaceAll('ckedit-enabled');\n    CKEDITOR.on('instanceReady', (ev) => {\n        if (window.location !== window.parent.location) // if in iframe, trigger resize.\n            top.$(top).trigger('resize');\n    });\n    $('[data-type=media-selector], [class=media-selector]').mediaSelector();\n    initMediaUploader();\n    const form = $('form');\n    form.removeData(\"validator\");\n    form.removeData(\"unobtrusiveValidation\");\n    form.find('input, select').each((index, element) => {\n        $.data(element, \"previousValue\", null);\n    });\n    $.validator.unobtrusive.parse(\"form\");\n    initTagging();\n    $(\"[data-color-picker]\").each(function (index, element) {\n        const $element = $(element);\n        $element.spectrum({\n            preferredFormat: \"hex\",\n            showInput: true\n        });\n    });\n\n    $('form[data-are-you-sure]').each(function (index, element) {\n        const form = $(element);\n        form.areYouSure({message: form.data('are-you-sure')});\n    });\n\n    initSortable();\n\n\n    $(document).trigger('initialize-plugins', {});\n}\n\n\nexport function registerGlobalFunctions() {\n    window.admin ??= {};\n    window.admin.initializePlugins = initializePlugins;\n}\n","﻿/// <reference path=\"./admin.js\" />\nexport function initTagging() {\n    $(\".system-tagging\").tagit({\n        autocomplete: {\n            delay: 250,\n            minLength: 1,\n            source: function (request, response) {\n                $.getJSON('/Admin/Tag/Search', {\n                    term: extractLast(request.term)\n                }, response);\n            }\n        },\n        showAutocompleteOnFocus: true,\n        singleField: true,\n        placeholderText: \"Start typing to add tags.\",\n        allowSpaces: true\n    });\n}\n\nfunction extractLast(term) {\n    return split(term).pop();\n}\nfunction split(val) {\n    return val.split(/,\\s*/);\n}\n","﻿export function initSortable() {\n    $(\"[data-sortable]\").each((_, element) => {\n        const $element = $(element);\n        $element.sortable({\n            update: function (event, ui) {\n                $element.find('li').each(function (index, domElement) {\n                    $(domElement).find('[name*=\"Order\"]').val(index);\n                });\n            }\n        });\n    });\n}","function resizeModal(jqElement) {\n    if (!jqElement)\n        return;\n    if (jqElement.classList === undefined)\n        return;\n    \n    const modal = jqElement.hasClass('modal') ? jqElement : jqElement.parents('.modal');\n    const height = modal.outerHeight(),\n        windowHeight = $(window).outerHeight(),\n        width = modal.outerWidth(),\n        windowWidth = $(window).outerWidth();\n    const top = (windowHeight - height) / 2,\n        left = (windowWidth - width) / 2;\n\n    modal.css('top', top).css('left', left);\n}\n\nfunction hasClass(element, className) {\n    return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n\nexport function setupResizeModal() {\n    $(window).resize(function () {\n        $('.modal').each(function (index, element) {\n            resizeModal($(element));\n        });\n    });\n    window.resizeModal = resizeModal;\n}\n","﻿import { setCloseButtonPosition } from \"./setup-featherlight\";\nimport { MediaUploader } from \"./media-uploader\";\n\nfunction MediaSelector(options) {\n    let element;\n    const settings = jQuery.extend(MediaSelector.defaults, options);\n    let self,\n        timer,\n        mediaUploader,\n        $;\n\n    function toggle(link) {\n        const id = link.data('media-toggle');\n        const thisElement = element.find('[data-file-result=' + id + ']');\n        const others = element.find('[data-file-result]').not(thisElement);\n        others.each(function () {\n            const result = $(this);\n            hideResult(result);\n        });\n        const shown = thisElement.data('content-shown');\n        if (shown) {\n            hideResult(thisElement);\n        } else {\n            thisElement.find(settings.mediaResultSelector).slideDown();\n            thisElement.data('content-shown', true);\n        }\n    };\n\n    function hideResult(result) {\n        const shown = result.data('content-shown');\n        if (shown) {\n            result.find(settings.mediaResultSelector).slideUp();\n            deselectAll(result);\n            result.data('content-shown', false);\n        }\n    };\n\n    function submitForm(event) {\n        event.preventDefault();\n        const form = element.find(settings.formSelector);\n        const url = form.attr('action') + '?' + form.serialize();\n        updateResults(url);\n    };\n\n    function changePage(event) {\n        event.preventDefault();\n        const url = $(this).attr('href');\n        updateResults(url);\n    };\n\n    function updateResults(url) {\n        $.get(url, function (response) {\n            const newResults = $(response).find(settings.resultsHolderSelector);\n            $(element).find(settings.resultsHolderSelector).replaceWith(newResults);\n            initializeMediaUploader();\n        });\n    };\n\n    function selectFile(event) {\n        const file = $(this).data('file');\n        element.find('[data-action=\"select\"][data-file=' + file + ']').removeAttr('disabled');\n    };\n\n    function deselectAll(result) {\n        result.find('input[data-file]').removeAttr('checked');\n        result.find('[data-action=\"select\"]').attr('disabled', 'disabled');\n    };\n\n    function selected(event) {\n        event.preventDefault();\n        const fileValue = element.find('input[data-file]').filter(':checked').val();\n        if (fileValue !== '') {\n            if (settings.onSelected) {\n                $.get('/Admin/MediaSelector/GetFileInfo/', { value: fileValue }, function (info) {\n                    settings.onSelected(info);\n                });\n            }\n        }\n    };\n\n    function initializeMediaUploader() {\n        mediaUploader = new MediaUploader(element, {\n            onFileUploadStopped: function (event, dropzone) {\n                const form = element.find(settings.formSelector);\n                const url = form.attr('action') + '?' + form.serialize();\n                updateResults(url);\n                dropzone.removeAllFiles();\n            }\n        });\n        mediaUploader.init();\n    };\n\n    return {\n        show: function (jQ) {\n            self = this;\n            $ = jQ;\n            const link = $('<a>').attr('href', settings.selectorUrl);\n            link.hide();\n            link.featherlight({\n                type: 'iframe',\n                iframeWidth: 820,\n                afterOpen: function () {\n                    element = $('.featherlight-inner').contents();\n                    element.find('form').css('margin', '0');\n                    setCloseButtonPosition(this.$instance);\n                    self.init();\n                },\n                beforeOpen: function () {\n                    $(\".mrcms-edit-menu\", document).hide();\n                },\n                onResize: function () {\n                    if (this.autoHeight) {\n                        // Shrink:\n                        this.$content.css('height', '10px');\n                        // Then set to the full height:\n                        this.$content.css('height', this.$content.contents().find('body')[0].scrollHeight);\n                    }\n                    setCloseButtonPosition(this.$instance);\n                }\n            }).click().remove();\n            return self;\n        },\n        init: function () {\n            self = this;\n            initializeMediaUploader();\n            $(element).on('click', 'div.header', function (event) {\n                event.preventDefault();\n                const link = $(this).find(settings.mediaToggleSelector);\n                if (link.length) {\n                    toggle(link);\n                }\n            });\n            $(element).on('submit', settings.formSelector, submitForm);\n            $(element).on('change', '#CategoryId', submitForm);\n            $(element).on('keyup', '#Query', function (event) {\n                timer && clearTimeout(timer);\n                timer = setTimeout(function () {\n                    submitForm(event);\n                }, 300);\n            });\n            $(element).on('click', '.pagination a', changePage);\n            $(element).on('click', 'input[data-file]', selectFile);\n            $(element).on('click', '[data-action=\"select\"]', selected);\n\n            return self;\n        },\n        getSettings: function () {\n            return settings;\n        }\n    };\n};\n\nfunction MediaSelectorWrapper(el, options) {\n    const element = el,\n        settings = $.extend(MediaSelectorWrapper.defaults, options);\n    let self,\n        preview,\n        removeButton,\n        selectButton,\n        buttonHolder,\n        eventsRegistered = false;\n\n    function getValue() {\n        return element.val();\n    }\n\n    function valueIsSet() {\n        const value = getValue();\n        return value != null && value != '';\n    }\n\n    function getAltInput(value) {\n        const altFormGroup = $('<div>').addClass('form-group has-feedback hide').attr('id', el.attr('id') + '-alt-holder');\n        const altId = el.attr('id') + '-alt';\n        const altLabel = $('<label>').html('Alt').attr('for', altId);\n        altFormGroup.append(altLabel);\n        const altInput = $('<input>').attr('type', 'text').addClass('form-control input-sm').attr('id', altId).attr('data-url', value);\n        altFormGroup.append(altInput);\n        const altFeedback = $('<span class=\"fa fa-ok form-control-feedback hide\" aria-hidden=\"true\"></span>');\n        altFormGroup.append(altFeedback);\n        $.get(settings.altUrl, { url: value }, function (response) {\n            altInput.val(response.alt);\n            altFormGroup.removeClass('hide');\n            altInput.on('blur', updateAlt);\n        });\n        return altFormGroup;\n    }\n\n    function showSaved(inputElement) {\n        const formGroup = inputElement.closest('.form-group');\n        formGroup.addClass('has-success');\n        formGroup.find('.form-control-feedback').removeClass('hide');\n        clearTimeout(inputElement.removeSuccess);\n        inputElement.removeSuccess = setTimeout(function () {\n            formGroup.removeClass('has-success');\n            formGroup.find('.form-control-feedback').addClass('hide');\n        }, 2000);\n    }\n\n    function updateAlt(event) {\n        const input = $(event.target);\n        $.post(settings.updateAltUrl, { url: input.data('url'), value: input.val() }, function (response) {\n            if (response) {\n                showSaved(input);\n            }\n        });\n    }\n\n    function updateDescription(event) {\n        const input = $(event.target);\n        $.post(settings.updateDescriptionUrl, { url: input.data('url'), value: input.val() }, function (response) {\n            if (response) {\n                showSaved(input);\n            }\n        });\n    }\n\n    function getDescriptionInput(value) {\n        const descriptionFormGroup = $('<div>').addClass('form-group has-feedback hide').attr('id', el.attr('id') + '-description-holder');\n        const descriptionId = el.attr('id') + '-description';\n        const descriptionLabel = $('<label>').html('Description').attr('for', descriptionId);\n        descriptionFormGroup.append(descriptionLabel);\n        const descriptionInput = $('<input>').addClass('form-control input-sm').attr('id', descriptionId).attr('data-url', value);\n        descriptionFormGroup.append(descriptionInput);\n\n        const descriptionFeedback = $('<span class=\"fa fa-ok form-control-feedback hide\" aria-hidden=\"true\"></span>');\n        descriptionFormGroup.append(descriptionFeedback);\n        $.get(settings.descriptionUrl, { url: value }, function (response) {\n            descriptionInput.val(response.description);\n            descriptionFormGroup.removeClass('hide');\n            descriptionInput.on('blur', updateDescription);\n        });\n        return descriptionFormGroup;\n    }\n\n    function getPreview() {\n        if (valueIsSet()) {\n            const value = getValue();\n            if (isImage(value)) {\n                const holder = $('<div>').addClass('row media-preview');\n                const imageCol = $('<div>').addClass('col-auto pt-3');\n                imageCol.append($('<img src=\"' + value + '\" class=\\\"img-fluid img-thumbnail\\\" />'));\n                imageCol.append(buttonHolder);\n                holder.append(imageCol);\n                const dataCol = $('<div>').addClass('col pt-3');\n\n                const altFormGroup = getAltInput(value);\n                dataCol.append(altFormGroup);\n\n                const descriptionFormGroup = getDescriptionInput(value);\n                dataCol.append(descriptionFormGroup);\n\n                holder.append(dataCol);\n                return holder;\n            } else {\n                return $('<span>' + value + '</span>');\n            }\n        } else {\n            buttonHolder.appendTo($('[data-media-selector-holder-' + el.attr('id') + ']'));\n            return $('<img src=\"' + settings.noImageSelectedImage + '\" style=\"' + settings.previewStyle + '\" />');\n        }\n    };\n\n    function isImage(image) {\n        const extension = image.split('.').pop().toLowerCase();\n        const imageExtensions = [\"jpg\", \"jpeg\", \"gif\", \"png\"];\n\n        let imageCheck = false;\n        for (let i = 0; i < imageExtensions.length; i++) {\n            if (extension == imageExtensions[i]) {\n                imageCheck = true;\n            }\n        }\n        return imageCheck;\n    };\n    return {\n        init: function () {\n            self = this;\n            if (element.is(\"input\")) {\n                const para = $('<p>').attr('data-media-selector-holder-' + el.attr('id'), 'true');\n                buttonHolder = $('<div>').addClass(\"d-flex mt-1\").appendTo(para);\n                preview = $('<div>');\n                element.before(preview);\n                selectButton = $('<button>').addClass(settings.selectClasses).html(settings.selectMessage).attr('data-media', 'select')\n                    .appendTo(buttonHolder);\n                removeButton = $('<button>').addClass(settings.removeClasses).html(settings.removeMessage).attr('data-media', 'remove')\n                    .appendTo(buttonHolder);\n                element.hide().after(para);\n                self.update();\n                self.registerEvents();\n\n            }\n        },\n        registerEvents: function () {\n            if (!eventsRegistered) {\n                selectButton.click(function (event) {\n                    event.preventDefault();\n                    self.show();\n                });\n                removeButton.click(function (event) {\n                    event.preventDefault();\n                    self.reset();\n                });\n            }\n            eventsRegistered = true;\n        },\n        update: function () {\n            const value = this.getValue();\n            if (value !== null && value !== '') {\n                removeButton.show();\n                buttonHolder.addClass('btn-group');\n            } else {\n                removeButton.hide();\n                buttonHolder.removeClass('btn-group');\n            }\n            const newPreview = getPreview();\n            preview.replaceWith(newPreview);\n            preview = newPreview;\n        },\n        getValue: function () {\n            return getValue();\n        },\n        setValue: function (value) {\n            element.val(value);\n            self.update();\n        },\n        show: function () {\n            const mediaSelector = new MediaSelector({\n                onSelected: self.onSelected,\n                element: element,\n                name: $(element).attr('id')\n            });\n            mediaSelector.show($);\n        },\n        reset: function () {\n            self.setValue('');\n        },\n        onSelected: function (data) {\n            self.setValue(data.url);\n            $.featherlight.close();\n        }\n    };\n};\nMediaSelectorWrapper.defaults =\n{\n    noImageSelectedImage: '/Areas/Admin/Content/img/no-media-selected.jpg',\n    previewStyle: 'max-height: 200px; max-width:200px;',\n    selectClasses: 'btn btn-sm btn-success ',\n    selectMessage: 'Select media...',\n    removeClasses: 'btn btn-sm btn-danger ',\n    removeMessage: 'Remove media...',\n    altUrl: '/admin/mediaselector/alt',\n    updateAltUrl: '/admin/mediaselector/updatealt',\n    descriptionUrl: '/admin/mediaselector/description',\n    updateDescriptionUrl: '/admin/mediaselector/updatedescription'\n};\nMediaSelector.defaults =\n{\n    selectorUrl: '/Admin/MediaSelector/Show',\n    formSelector: '#search-form',\n    resultsHolderSelector: '#results',\n    mediaResultSelector: '[data-media-result]',\n    mediaToggleSelector: '[data-media-toggle]',\n    onSelected: function (info) {\n    }\n};\n\nexport function registerPlugins() {\n    window.MediaSelector = MediaSelector;\n    $.fn.mediaSelector = function (method) {\n        const methods = {\n            init: function (options) {\n                return this.each(function () {\n                    const self = $(this);\n                    if (self.hasClass(\"media-selector-initialized\")) {\n                        return;\n                    }\n                    const wrapper = new MediaSelectorWrapper(self, options);\n                    wrapper.init();\n                    self.addClass(\"media-selector-initialized\");\n                });\n            }\n        };\n        // Method calling logic\n        if (methods[method]) {\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n        } else if (typeof method === 'object' || !method) {\n            return methods.init.apply(this, arguments);\n        } else {\n            return $.error('Method ' + method + ' does not exist on mediaselector');\n        }\n    };\n\n    $.fn.mediaSelectorPopup = function (method) {\n        const methods = {\n            init: function (options) {\n                return this.each(function () {\n                    const self = $(this);\n                    const selector = new MediaSelector(self, options);\n                    selector.init();\n                    $.data(self[0], 'media-selector', selector);\n                    if (parent.$) {\n                        parent.$.data(self[0], 'media-selector', selector);\n                    }\n                });\n            }\n        };\n        // Method calling logic\n        if (methods[method]) {\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n        } else if (typeof method === 'object' || !method) {\n            return methods.init.apply(this, arguments);\n        } else {\n            return $.error('Method ' + method + ' does not exist on mediaselector');\n        }\n    };\n}\n","﻿function showMessages(messagesCell, response) {\n    if (response.messages.length) {\n        const ul = $('<ul>').addClass('list-unstyled mb-0');\n        $.each(response.messages, function (i, message) {\n            $('<li>').text(message).appendTo(ul);\n        });\n        ul.appendTo(messagesCell);\n    }\n};\n\nfunction setResult(row, statusCell, icon, rowClass) {\n    statusCell.html('<i class=\"fa fa-' + icon + '\"></i>');\n    row.addClass(rowClass);\n}\n\nfunction onSuccess(row, statusCell) {\n    setResult(row, statusCell, 'check', 'table-success');\n    //statusCell.html('<i class=\"fa fa-ok\"></i>');\n    //row.addClass('success');\n};\n\nfunction onFailure(row, statusCell) {\n    setResult(row, statusCell, 'remove', 'table-danger');\n    //statusCell.html('<i class=\"fa fa-remove\"></i>');\n    //row.addClass('danger');\n};\n\nfunction onWarning(row, statusCell) {\n    setResult(row, statusCell, 'asterisk', 'table-warning');\n};\n\nfunction onNA(row, statusCell) {\n    setResult(row, statusCell, 'minus', 'table-info');\n};\n\nfunction processRow(row) {\n    const url = row.data('process-url');\n    const statusCell = row.find('[data-status]');\n    const messagesCell = row.find('[ data-messages]');\n    statusCell.html('Processing');\n    $.get(url, function (response) {\n        switch (response.status) {\n            case 0:\n                onSuccess(row, statusCell);\n                break;\n            case 1:\n                onFailure(row, statusCell);\n                break;\n            case 2:\n                onWarning(row, statusCell);\n                break;\n            case 3:\n                onNA(row, statusCell);\n                break;\n        }\n        showMessages(messagesCell, response);\n    });\n}\n\nexport function setupHealthChecks() {\n    $('[data-health-check-list]').find('[data-process-url]').each(function (index, element) {\n        processRow($(element));\n    });\n\n}\n\n//     };\n//     return {\n//         init: function () {\n//             self = this;\n//             element.find('[data-process-url]').each(function (index, element) {\n//                 processRow($(element));\n//             });\n//         }\n//     };\n// };\n//\n//\n// $(function () {\n//     window.HealthCheckProcessor = new HealthCheckProcessor());\n//     window.HealthCheckProcessor.init();\n// });","﻿function updateArea(event, area) {\n    const areaName = 'update-' + area;\n    const selector = '[data-' + areaName + ']';\n    $(selector).each(function () {\n        const info = $(this);\n        $.get(info.data(areaName), function (result) {\n            info.replaceWith(result);\n            window.admin.initializePlugins($(selector));\n        });\n    });\n}\n\nexport function registerUpdateArea() {\n    $(document).on('update-area', updateArea);\n}\n","﻿import {initializePlugins} from \"./initialize-plugins\";\n\nlet previousValue = '';\nlet timer = 0;\n\nfunction getCurrentValue() {\n    const scope = $('[data-add-webpage]')\n    return {\n        name: scope.find('#Name').val(),\n        mode: scope.find('#mode').is(':checked'),\n        webpageType: scope.find(\"[name=WebpageType]:checked\").val(),\n        template: scope.find(\"#PageTemplate_Id\").val()\n    };\n};\n\nfunction suggestUrl() {\n    const scope = $('[data-add-webpage]')\n    const pageName = scope.find(\"#Name\").val(),\n        webpageType = scope.find(\"[name=WebpageType]:checked\").val(),\n        parentId = scope.find(\"#ParentId\").val(),\n        template = scope.find(\"#PageTemplate_Id\").val(),\n        useHierarchy = scope.find(\"#mode\").is(':checked');\n    console.log(scope.find(\"[name=WebpageType]:checked\"));\n    if (pageName !== \"\") {\n        $.get('/Admin/WebpageUrl/Suggest', {\n            pageName: pageName,\n            parentId: parentId,\n            webpageType: webpageType,\n            template: template,\n            useHierarchy: useHierarchy\n        }, function (data) {\n            scope.find(\"#UrlSegment\").val(data);\n        });\n        previousValue = getCurrentValue();\n    } else {\n        scope.find(\"#UrlSegment\").val('');\n        previousValue = getCurrentValue();\n    }\n};\nconst updateUrl = function (event) {\n    event.preventDefault();\n    if (areValuesChanged()) {\n        suggestUrl();\n    }\n};\n\nfunction delayedUpdateUrl(event) {\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n        updateUrl(event);\n    }, 300);\n};\n\nfunction areValuesChanged() {\n    const value = previousValue;\n    const currentValue = getCurrentValue();\n    if (value === null)\n        return true;\n\n    return value.webpageType !== currentValue.webpageType\n        || value.mode !== currentValue.mode\n        || value.name !== currentValue.name\n        || value.template !== currentValue.template;\n};\n\nfunction triggerKeyUp(event) {\n    event.preventDefault();\n    $(event.target).keyup();\n};\n\nfunction logCurrentValue(event) {\n    event.preventDefault();\n    previousValue = getCurrentValue();\n};\n\nfunction updateAdditionalProperties(event) {\n    const scope = $('[data-add-webpage]')\n    scope.find(\".hide-until-document-selected\").show();\n    scope.find(\"#message-choose-document\").hide();\n    const element = scope.find(':radio[name=WebpageType]:checked');\n    const webpageType = element.val();\n    $.get('/Admin/Webpage/AddProperties', {type: webpageType, parentId: scope.find(\"#Parent_Id\").val()}, function (data) {\n        $(\"[data-additional-properties]\").html(data);\n        initializePlugins();\n    });\n    // set page template from data attribute\n    const templateId = element.data('page-template-id');\n    scope.find('#PageTemplateId').val(templateId);\n};\n\nexport function setupAddWebpage() {\n    $(document).on('focus', '[data-add-webpage] #Name', logCurrentValue);\n    $(document).on('blur', '[data-add-webpage] #Name', triggerKeyUp);\n    $(document).on('keyup', '[data-add-webpage] #Name', delayedUpdateUrl);\n    $(document).on('change', '[data-add-webpage] #mode', delayedUpdateUrl);\n    $(document).on('change', '[data-add-webpage] [name=WebpageType]', delayedUpdateUrl);\n    $(document).on('change', '[data-add-webpage] #PageTemplate_Id', delayedUpdateUrl);\n    $(document).on('change', '[data-add-webpage] :radio[name=WebpageType]', updateAdditionalProperties);\n    const scope = $('[data-add-webpage]')\n    if (scope.find(':radio[name=WebpageType]:checked').length) {\n        updateAdditionalProperties();\n    }\n}\n","﻿import {getRemoteModel} from \"./setup-featherlight\";\n\n\nfunction getId(node) {\n    let id = node.data.id;\n    if (id == null)\n        id = \"\";\n    return id;\n}\n\nfunction getParentId(node) {\n    let id = node.data.parentId;\n    if (id == null || (id === 0))\n        id = \"\";\n    return id;\n}\n\nfunction menuItems(node) {\n    const items = {};\n    for (let i = 0; i < menuRules.length; i++) {\n        menuRules[i](node, items);\n    }\n    return items;\n}\n\nwindow.menuRules = [\n    (node, items) => {\n        if (node.data.canAddChild === \"True\") {\n            items.addMenuItem = {\n                label: \"Add\",\n                action: () => {\n                    return location.href = \"/Admin/\" + node.data.controller + \"/Add/\" + getId(node);\n                }\n            };\n        }\n    },\n    (node, items) => {\n        if (node.data.sortable === \"True\") {\n            items.sortMenuItem = {\n                label: \"Sort\",\n                action: () => {\n                    return location.href = \"/Admin/\" + node.data.controller + \"/Sort/\" + getParentId(node);\n                }\n            };\n        }\n    },\n    (node, items) => {\n        if (!isNaN(node.id)) {\n            items.editMenuItem = {\n                label: \"Edit\",\n                action: () => {\n                    return location.href = \"/Admin/\" + node.data.controller + \"/Edit/\" + getId(node);\n                }\n            };\n        }\n    },\n    (node, items) => {\n        if (node.data.candelete === \"True\") {\n            items.deleteMenuItem = {\n                label: \"Delete\",\n                action: () => {\n                    return getRemoteModel(\"/Admin/\" + node.data.controller + \"/Delete/\" + getId(node));\n                }\n            };\n        }\n    }\n]\n\nexport function initTree(element, key, url) {\n    element.jstree({\n        \"core\": {\n            \"animation\": 0,\n            \"check_callback\": true,\n            'data': {\n                'url': url,\n                'data': function (node) {\n                    return {'id': node.id};\n                },\n                cache: false\n            }\n        },\n        \"state\": {\n            \"key\": `${location.hostname}.${key}`\n        },\n        \"contextmenu\": {\n            \"items\": menuItems\n        },\n        \"plugins\": [\"state\", \"contextmenu\"]\n    });\n    element.on('click', '.jstree-anchor', function (event) {\n        const clicked = $(event.target);\n        const href = this.href;\n        if (clicked.data('toggle') == 'fb-modal') {\n            getRemoteModel(href);\n        } else {\n            location.href = href;\n        }\n    });\n}\n","﻿$(function () {\n\n\n});\n//Show the accordion which was last shown for layout areas.\n$(window).on('load', function () {\n});\n\n\nexport function setupEditWebpage(){\n    \n    $.validator.setDefaults({ ignore: \"\" }); // validate hidden tabs\n    \n    const scope = $('[data-edit-webpage]');\n\n    scope.find(\"#UrlSegment\").blur(function (e) {\n        const that = $(this);\n        that.val(that.val().trim().replace(/[^a-zA-Z0-9-/]/g, '-'));\n    });\n\n    // scope.find('#publish-status-change').click(function (e) {\n    //     e.preventDefault();\n    //     const form = scope;\n    //     if (scope.find(\"#PublishOn\").val()?.length > 0) {\n    //         scope.find(\"#PublishOn\").val('');\n    //         form.submit();\n    //     } else {\n    //         $.get('/Admin/Webpage/GetServerDate', function (response) {\n    //             scope.find(\"#PublishOn\").val(response);\n    //             form.submit();\n    //         });\n    //     }\n    //     return false;\n    // });\n\n    //Show box for chaging the URL which is hidden by default.\n    scope.find(\"#change-url\").click(function (e) {\n        e.preventDefault();\n        scope.find(\"#UrlSegment\").removeAttr('disabled')\n    });\n\n    scope.find('#accordion-layout-areas').on('shown', function (e) {\n        store.set('selected-layout-area-' + location.pathname, e.target.id);\n    });\n\n    scope.find('#accordion-layout-areas').on('hidden', function (e) {\n        store. set('selected-layout-area-' + location.pathname, '');\n    });\n\n    scope.find('#PublishOn').change(function () {\n        scope.find('#publish-on-hidden').val($(this).val());\n    });\n\n    // lazy load iframe preview when tab is selected\n    // needs to be before shown from hash/cookie\n    scope.find('.main-content a[data-toggle=\"tab\"]').on('shown', function (e) {\n        const tab = e.target.toString();\n        if (tab.length > 0) {\n            if (tab.indexOf(\"preview\") !== -1) {\n                scope.find(\"#previewIframe\").attr('src', '/' + scope.find('#LiveUrlSegment').val());\n            }\n        }\n    });\n\n    //Permissions\n    $.get('/Admin/Role/GetRolesForPermissions', function (data) {\n        scope.find(\"#FrontEndRoles\").tagit({\n            autocomplete: { delay: 0, minLength: 0, source: data },\n            availableTags: data,\n            showAutocompleteOnFocus: true,\n            singleField: true,\n            placeholderText: \"Click to add role.\"\n        });\n    });\n\n    scope.find(\"#MetaKeywords\").tagit({\n        tagLimit: 15,\n        allowSpaces: true\n    });\n\n    scope.on('change','#HasCustomPermissions',setPermissionVisibility);\n    scope.on('change','#PermissionType',setPermissionVisibility);\n\n\n    function setPermissionVisibility() {\n        const form = scope;\n\n        const hasCustomPermissions = form.find('#HasCustomPermissions');\n        const customPermissions = form.find('[data-custom-permissions]');\n        const permissionType = customPermissions.find('#PermissionType');\n        const permissionTypeHolders = customPermissions.find('[data-custom-permissions-type]');\n        permissionTypeHolders.hide();\n\n        const showCustomPermissions = hasCustomPermissions.is(':checked');\n        customPermissions.toggle(showCustomPermissions);\n\n        if (!showCustomPermissions) {\n            return;\n        }\n\n        const permissionTypeValue = permissionType.val();\n        customPermissions.find('[data-custom-permissions-type=\"' + permissionTypeValue + '\"]').show();\n    }\n\n    setPermissionVisibility(); \n    \n    $(document).on('keypress',\n        function (event) {\n            if (event.which === 13) {\n                if (scope.find('#SEOTargetPhrase:focus').length) {\n                    event.preventDefault();\n                    scope.find('[data-seo-analyze]').click();\n                }\n                if (scope.find('input#Search:focus').length) {\n                    event.preventDefault();\n                    scope.find('#search-postings').click();\n                }\n            }\n\n        });\n    $(document).on('click', '[data-seo-analyze]', function (event) {\n        event.preventDefault();\n        const value = scope.find('#SEOTargetPhrase').val();\n        if (value === '') {\n            scope.find('[data-seo-analysis-summary]').html('Please enter a term to analyze.');\n        } else {\n            scope.find('[data-seo-analysis-summary]').html('Analyzing...');\n            $.get('/Admin/SEOAnalysis/Analyze', { id: scope.find('#Id').val(), SEOTargetPhrase: value }, function (response) {\n                scope.find('[data-seo-analysis-summary]').html(response);\n            });\n        }\n    });\n    if (store.get('selected-layout-area-' + location.pathname)) {\n        scope.find('#accordion-layout-areas a[href=\"#' + store.get('selected-layout-area-' + location.pathname) + '\"]').click();\n    }\n}","﻿export function fileTools(options) {\n    const settings = $.extend({\n        fileList: \"#folder-container\",\n        folderClass: \".folder\",\n        fileToolsContainer: \"#file-tools\",\n        uiSelectedClass: \".ui-selected\",\n        fileClass: \".file\",\n        cutFilesBtn: \"#cut-files\",\n        deleteFilesBtn: \"#delete-files\",\n        pasteFilesBtn: \"#paste-files\",\n        filesStorageKey: \"files\",\n        cutFilesStorageKey: \"cut-files\",\n        clearFilesBtn: \"#clear-files\",\n        fileCutClass: \".files-cut\",\n\n    }, options);\n    let self;\n    return {\n        init: function () {\n            self = this;\n            $(document).on('initialize-plugins', function () {\n                $(settings.fileList).selectable({\n                    filter: \".file, .folder\",\n                    stop: self.selectedStop,\n                    cancel: \".ui-selected, ul.pagination a\"\n                });\n            });\n\n            //enbales double click\n            $(document).on('click', settings.uiSelectedClass, function () { $(this).removeClass('ui-selected').parents('.ui-selectable').trigger('selectablestop'); });\n\n            $(document).on('dblclick', settings.fileClass + \",\" + settings.folderClass, function () {\n                location.href = $(this).data('url');\n            });\n\n            $(document).on('click', settings.clearFilesBtn, function () {\n                self.clearSelectedFiles();\n                self.clearCutStyles();\n                self.setSelectedFileData('');\n                self.setCutFileData('');\n                self.disableCut();\n                self.disableDelete();\n                self.disablePaste();\n            });\n\n            $(document).on('click', settings.cutFilesBtn, function (e) {\n                e.preventDefault();\n                self.clearCutStyles();\n                self.copyCutFilesToStorage();\n            });\n\n            $(document).on('click', settings.pasteFilesBtn, function (e) {\n                e.preventDefault();\n                self.paste();\n            });\n\n            $(document).on('click', settings.deleteFilesBtn, function (e) {\n                e.preventDefault();\n                swal({ title: \"Are you sure?\", text: \"Your will not be able to recover this!\", type: \"warning\", showCancelButton: true, confirmButtonColor: \"#DD6B55\", confirmButtonText: \"Yes, delete it!\", closeOnConfirm: true }, function () { self.deleteFiles(); });\n            });\n\n            self.setSelectedFileData('');\n            self.setSelectedFiles();\n            return self;\n        },\n        deleteFiles: function () {\n            const filesAndFolders = self.getSelectedFileData().split(',');\n            let files = filesAndFolders.filter(isFileId).join(',');\n            files = replaceAll(\"file-\", \"\", files);\n            let folders = filesAndFolders.filter(isFolderId).join(',');\n            folders = replaceAll(\"folder-\", \"\", folders);\n\n            $.ajax({\n                type: \"POST\",\n                url: \"/Admin/MediaCategory/DeleteFilesAndFolders\",\n                data: {\n                    files: files,\n                    folders: folders\n                },\n                success: function (data) {\n                    self.clearCutStyles();\n                    self.clearSelectedFiles();\n                    self.setSelectedFileData('');\n                    self.setCutFileData('');\n                    if (data.message != '')\n                        alert(data.message);\n                    self.setButtonState();\n                    $(document).trigger('update-area', 'media-folder');\n                }\n            });\n        },\n        paste: function () {\n            const filesAndFolders = self.getCutFileData().split(',');\n            let files = filesAndFolders.filter(isFileId).join(',');\n            files = replaceAll(\"file-\", \"\", files);\n            let folders = filesAndFolders.filter(isFolderId).join(',');\n            folders = replaceAll(\"folder-\", \"\", folders);\n            $.ajax({\n                type: \"POST\",\n                url: \"/Admin/MediaCategory/MoveFilesAndFolders\",\n                data: {\n                    folderId: $(\"#FolderId\").val(),\n                    files: files,\n                    folders: folders\n                },\n                success: function (data) {\n                    self.clearCutStyles();\n                    self.clearSelectedFiles();\n                    self.setSelectedFileData('');\n                    self.setCutFileData('');\n                    if (data.message != '')\n                        alert(data.message);\n                    self.setButtonState();\n                    $(document).trigger('update-area', 'media-folder');\n                }\n            });\n        },\n        copyCutFilesToStorage: function () {\n            self.disableCut();\n            self.enablePaste();\n            self.setCutFileData(self.getSelectedFileData());\n            self.setOpacityOnCutFiles(self.getCutFileData());\n        },\n        setOpacityOnCutFiles: function (files) {\n            const fileIds = files.split(',');\n            $.each(fileIds, function (number) {\n                const selector = \"[data-id='\" + fileIds[number] + \"']\";\n                $(selector).addClass(\"files-cut\");\n            });\n        },\n        selectedStop: function () {\n            const data = $(\".file.ui-selected, .folder.ui-selected\").map(function () {\n                return $(this).data('id');\n            }).get().join(\",\");\n            self.setSelectedFileData(data);\n            self.setButtonState();\n        },\n        setSelectedFiles: function () {\n            //set ui selected on elements\n            const files = self.getSelectedFileData();\n            let fileIds;\n            if (typeof files != 'undefined' && files != '' && files != null) {\n                fileIds = files.split(',');\n                $.each(fileIds, function (number) {\n                    const selector = \"[data-id='\" + fileIds[number] + \"']\";\n                    $(selector).addClass(settings.uiSelectedClass.replace('.', ''));\n                });\n            }\n            const cutFiles = self.getCutFileData();\n            if (typeof cutFiles != 'undefined' && cutFiles != '' && cutFiles != null) {\n                fileIds = cutFiles.split(',');\n                $.each(fileIds, function (number) {\n                    const selector = \"[data-id='\" + fileIds[number] + \"']\";\n                    $(selector).addClass(settings.fileCutClass.replace('.', ''));\n                });\n            }\n            self.setButtonState();\n        },\n        setButtonState: function () {\n            self.disableCut();\n            self.disablePaste();\n            self.disableDelete();\n            if (self.getSelectedFileData() != '') {\n                self.enableCut();\n            } else if (self.getSelectedFileData() != '' && self.getCutFileData() == '') {\n                self.enableCut();\n            }\n            if (self.getCutFileData() != '') {\n                self.enablePaste();\n            }\n            self.enableDelete();\n        },\n        clearSelectedFiles: function () {\n            $.each($(\".file\" + settings.uiSelectedClass + \",\" + \" .folder\" + settings.uiSelectedClass), function () {\n                $(this).removeClass(settings.uiSelectedClass.replace('.', ''));\n            });\n        },\n        clearCutStyles: function () {\n            $.each($(settings.fileCutClass), function () {\n                $(this).removeClass(settings.fileCutClass.replace('.', ''));\n            });\n        },\n        getSelectedFileData: function () {\n            return store.get(settings.filesStorageKey);\n        },\n        getCutFileData: function () {\n            return store.get(settings.cutFilesStorageKey);\n        },\n        setSelectedFileData: function (data) {\n            store.set(settings.filesStorageKey, data);\n            self.setButtonState();\n        },\n        setCutFileData: function (data) {\n            store.set(settings.cutFilesStorageKey, data);\n            self.setButtonState();\n        },\n        enableCut: function () {\n            $(settings.cutFilesBtn).removeAttr(\"disabled\");\n        },\n        disableCut: function () {\n            $(settings.cutFilesBtn).attr(\"disabled\", \"disabled\");\n        },\n        enableDelete: function () {\n            $('.file.ui-selected, .folder.ui-selected').each(function () {\n                $(settings.deleteFilesBtn).removeAttr(\"disabled\");\n            });\n        },\n        disableDelete: function () {\n            $(settings.deleteFilesBtn).attr(\"disabled\", \"disabled\");\n        },\n        enablePaste: function () {\n            $(settings.pasteFilesBtn).removeAttr(\"disabled\");\n        },\n        disablePaste: function () {\n            $(settings.pasteFilesBtn).attr(\"disabled\", \"disabled\");\n        }\n    };\n};\n\n// (function () {\n//     var fileTools = new FileTools().init();\n// })();\n\nfunction isFileId(element) {\n    return element.indexOf(\"file\") > -1;\n}\n\nfunction isFolderId(element) {\n    return element.indexOf(\"folder\") > -1;\n}\n\nfunction replaceAll(find, replace, str) {\n    return str.replace(new RegExp(find, 'g'), replace);\n}","﻿import {MediaUploader} from \"./media-uploader\";\nimport {fileTools} from \"./media\";\n\nexport function setupMediaCategoryPage() {\n    $('[data-media-category]').each((index, element) => {\n        fileTools().init();\n        new MediaUploader($(document), {}).init();\n    })\n}\n","﻿const pushMenuTarget = \"a[data-widget='pushmenu']\";\nconst pushMenuState = \"mrcms-push-menu-state\";\n\nconst mrcmsOpenMenuItems = \"mrcms-admin-menu-items\";\n\n//left hand nav open/close and persistence.\nfunction setupNav() {\n    const target = \"ul#sidebar-nav\";\n\n    $(target).on('expanded.lte.treeview', function () {\n        logOpenMenus();\n    });\n\n    $(target).on('collapsed.lte.treeview', function () {\n        logOpenMenus();\n    });\n\n    $(pushMenuTarget).on('collapsed.lte.pushmenu', function () {\n        store.set(pushMenuState, 'collapsed')\n    });\n\n    $(pushMenuTarget).on('shown.lte.pushmenu', function () {\n        store.set(pushMenuState, 'shown')\n    });\n}\n\nfunction logOpenMenus() {\n    const data = $(\".menu-open\").map(function () {\n        return $(this).data('menu');\n    }).get().join(\",\");\n\n    store.set(mrcmsOpenMenuItems, data);\n}\n\nfunction openNavItems() {\n    const items = store.get(mrcmsOpenMenuItems) || '';\n    const keys = items.split(\",\");\n    for (let i = 0; i < keys.length; i++) {\n        $(\"li[data-menu='\" + keys[i] + \"']\").addClass('menu-open');\n    }\n}\n\nexport function setupMenu() {\n    openNavItems();\n    setSideBarState();\n    setupNav();\n}\n\nfunction setSideBarState() {\n    const state = store.get(pushMenuState);\n    if (state === 'collapsed' && !$(\"body\").hasClass('sidebar-collapse') && $(window).width() > 992) {\n        $(window).PushMenu('toggle')\n    }\n}\n\n","﻿function setActiveTab(tab) {\n    const key = $(tab).data(\"stickytabs\");\n    const currentTab = store.get(key);\n    if (location.hash !== '' && $(tab).find(` a[href=\"${location.hash}\"]`).length > 0) {\n        $(tab).find(` a[href=\"${location.hash}\"]`).tab('show');\n    } else if (currentTab) {\n        $(tab).find(`a[href=\"${currentTab}\"]`).tab('show');\n    } else if ($(tab).find('li a[data-toggle=\"tab\"]').length > 0 && $(tab).find('li.active a[data-toggle=\"tab\"]').length == 0) {\n        $(tab).find('a[data-toggle=\"tab\"]').eq(0).click();\n    }\n}\n\n\nfunction persistTab(e) {\n    store.set($(e.currentTarget).data(\"stickytabs\"), e.target.hash);\n}\n\nexport function setupStickyTabs() {\n    $(\"[data-stickytabs]\").each(function () {\n        setActiveTab(this);\n\n        $(this).on('shown.bs.tab', function (e) {\n            persistTab(e);\n        });\n    });\n}\n","export function setupUserAvatar() {\n    var chooseImage = document.getElementById('choose-avatar');\n    if (!chooseImage)\n        return;\n\n    var filename = '';\n    var contenttype = '';\n    var avatar = document.getElementById('avatar');\n    var image = document.getElementById('image');\n    var input = document.getElementById('input');\n    chooseImage = document.getElementById('choose-avatar');\n    var $progress = $('.progress');\n    var $progressBar = $('.progress-bar');\n    var $alert = $('.alert');\n    var $modal = $('#modal');\n    var cropper;\n    chooseImage.addEventListener('click', function (e) {\n        e.preventDefault();\n        $(input).click()\n    });\n    $('[data-toggle=\"tooltip\"]').tooltip();\n    input.addEventListener('change', function (e) {\n        var files = e.target.files;\n        var done = function (url) {\n            input.value = '';\n            image.src = url;\n            $alert.hide();\n            $modal.modal('show');\n        };\n        var reader;\n        var file;\n        var url;\n        if (files && files.length > 0) {\n            file = files[0];\n            filename = file.name;\n            contenttype = file.type;\n            if (URL) {\n                done(URL.createObjectURL(file));\n            } else if (FileReader) {\n                reader = new FileReader();\n                reader.onload = function (e) {\n                    done(reader.result);\n                };\n                reader.readAsDataURL(file);\n            }\n        }\n    });\n    $modal.on('shown.bs.modal', function () {\n        cropper = new Cropper(image, {\n            aspectRatio: 1,\n            viewMode: 3,\n        });\n    }).on('hidden.bs.modal', function () {\n        cropper.destroy();\n        cropper = null;\n    });\n    document.getElementById('crop').addEventListener('click', function () {\n        var initialAvatarURL;\n        var canvas;\n        $modal.modal('hide');\n        if (cropper) {\n            canvas = cropper.getCroppedCanvas({\n                width: 160,\n                height: 160,\n            });\n            initialAvatarURL = avatar.src;\n            avatar.src = canvas.toDataURL();\n            $progress.show();\n            $alert.removeClass('alert-success alert-warning');\n            canvas.toBlob(function (blob) {\n                var formData = new FormData($(\"#avatarForm\")[0]);\n                formData.append('file', blob, filename);\n\n                $.ajax({\n                    url: '/Admin/UserAvatar/Set',\n                    type: 'POST',\n                    data: formData,\n                    processData: false,\n                    contentType: false,\n                    success: function (result) {\n                        $alert.show().addClass('alert-success').text('Upload success').fadeOut();\n                        $($progress).fadeOut();\n                        window.location = $(\"#back-link\").attr('href');\n                    }\n                });\n\n\n            }, contenttype);\n        }\n    });\n\n}\n","﻿function showNotification(notification) {\n    noty({\n        text: '<div class=\"notification-date\">' + notification.date + '</div><div class=\"notification-msg\">' + notification.message + \"</div>\",\n        layout: 'bottomRight',\n        timeout: 5000\n    });\n};\n\nexport function setupTransientNotifications() {\n    let disableNotifications = $('body').data('disable-notifications');\n    if (disableNotifications === \"False\") {\n        const connection = new signalR.HubConnectionBuilder()\n            .withUrl('/notificationsHub')\n            .configureLogging(signalR.LogLevel.Warning)\n            .build();\n        connection.on('sendTransientNotification', showNotification);\n        connection.start().catch(err => console.error(err.toString()));\n    }\n    \n    \n}\n","﻿export function setupNotificationBar() {\n    const PersistentNotifications = function () {\n        const prependNotification = function (notification, updateLocalStorage = true) {\n            listContainer.prepend(displayNotification(notification));\n                if (updateLocalStorage) {\n                    let notifications = getNotificationsLocalStorage();\n                    notifications.push(notification);\n\n                    while (notifications.length > 25) {\n                        notifications.shift(); // Remove the oldest notification\n                    }\n\n                    updateNotificationsLocalStorage(notifications);\n                    updateNotificationCountLocalStorage(notifications.length);\n                }\n                updateNotificationCount();\n        };\n        let displayNotification = function (notification) {\n            return $('<li>').addClass('list-group-item').attr('data-notification', true).html('<div class=\"notification-date\">' + notification.date + '</div><div class=\"notification-msg\">' + notification.message + '</div>');\n        };\n        let resetNotifications = function () {\n            listContainer.empty();\n            listContainer.append(displayNoNotifications());\n            updateNotificationCount();\n        };\n        const navContainer = $('#persistentNotificationLink');\n        const listContainer = $('[data-notification-list]');\n\n        // Local storage handling functions\n        let updateNotificationCountLocalStorage = function (count) {\n            localStorage.setItem('notificationCount', count);\n        };\n\n        let getNotificationCountLocalStorage = function () {\n            return localStorage.getItem('notificationCount') || 0;\n        };\n\n        let updateNotificationsLocalStorage = function (notifications) {\n            localStorage.setItem('notifications', JSON.stringify(notifications));\n        };\n\n        let getNotificationsLocalStorage = function () {\n            return JSON.parse(localStorage.getItem('notifications')) || [];\n        };\n\n        // Existing functions\n        const updateNotificationCount = function () {\n            let count = getNotificationCountLocalStorage();\n            $('[data-notification-count]').html(count);\n        };\n\n        const initializeNotifications = function () {\n            let notifications = getNotificationsLocalStorage();\n            listContainer.empty();\n            if (notifications.length) {\n                notifications.reverse();\n                $.each(notifications, function (idx, notification) {\n                    prependNotification(notification, false);\n                });\n            } else {\n                resetNotifications();\n            }\n        };\n\n        const displayNoNotifications = function () {\n            return $('<li class=\"list-group-item\">').html('No notifications');\n        };\n\n        const markAllAsRead = function () {\n            // Clear the local storage data related to notifications\n            localStorage.removeItem('notifications');\n            localStorage.removeItem('notificationCount');\n\n            // Reset the displayed notifications and count\n            resetNotifications();\n        };\n\n\n        return {\n            init: function () {\n                updateNotificationCount();\n                navContainer.on('hidden.bs.dropdown', function (e) {\n                    markAllAsRead();\n                });\n                navContainer.on('show.bs.dropdown', function (e) {\n                    initializeNotifications();\n                });\n                const connection = new signalR.HubConnectionBuilder()\n                    .withUrl('/notificationsHub')\n                    .configureLogging(signalR.LogLevel.Warning)\n                    .build();\n\n                connection.on('sendPersistentNotification', function (notification) {\n                    prependNotification(notification);\n                });\n\n                connection.start().catch(err => console.error(err.toString()));\n            }\n        };\n    };\n\n    $(function () {\n        let disableNotifications = $('body').data('disable-notifications');\n        if (disableNotifications === \"False\") {\n            new PersistentNotifications().init();\n        }\n    });\n}\n","﻿export function setupMediaCategory() {\n\n    var container = $(\"#add-media-category\");\n    if (container.length === 0) {\n        return;\n    }\n\n    $.fn.delayKeyup = function (callback, ms) {\n        let timer = 0;\n        const el = $(this);\n        $(this).keyup(function () {\n            clearTimeout(timer);\n            timer = setTimeout(function () {\n                callback(el);\n            }, ms);\n        });\n        return $(this);\n    };\n    $(function () {\n\n        $(\"#Name\").delayKeyup(function () {\n            setStandardUrl();\n        }, 100);\n\n        function setStandardUrl() {\n            let parentUrl = $(\"#ParentUrl\").val();\n            if (parentUrl !== '') {\n                parentUrl += \"/\";\n            }\n            $(\"#UrlSegment\").val(parentUrl + $(\"#Name\").val().trim().replace(/\\W/g, '-').toLowerCase());\n        }\n\n        $(\"form\").validate();\n    });\n\n}","﻿\nexport function setupMessageTemplateEditor() {\n    (function ($) {\n        let templateBody = $('#Body');\n\n        if (templateBody.length > 0) {\n            if (templateBody.hasClass('message-ckedit')) {\n                CKEDITOR.replace('Body', {fullPage: true, allowedContent: true});\n            }\n        }\n    })(jQuery);\n}\nexport function setupMessageTemplatePreview() {\n    if (location.href.match(/Admin\\/MessageTemplatePreview/)) {\n        var PreviewMessageTemplate = function () {\n            function getPreview(event) {\n                event.preventDefault();\n                var form = $(event.target);\n                $.get(form.attr('action'), {id: $('#id').val()}, function (response) {\n                    $('#preview').html(response);\n                });\n            }\n\n            return {\n                init: function () {\n                    $(document).on('submit', '#preview-message-form', getPreview);\n                }\n            };\n        };\n\n        $(function () {\n            new PreviewMessageTemplate().init();\n        })\n    }\n}","﻿function updateUrlGenerators(event) {\n    event.preventDefault();\n    $.get('/admin/pageTemplate/getUrlGeneratorOptions', { type: $(event.target).val() }, setUrlGeneratorValues);\n}\nfunction setUrlGeneratorValues(data) {\n    const $el = $('[data-add-template-url-generator-type]');\n    $el.empty(); // remove old options\n    $.each(data, function (key, option) {\n        $el.append($(\"<option></option>\")\n            .attr(\"value\", option.value).text(option.text));\n    });\n}\nexport function setupAddPageTemplate(){\n    $(document).on('change', '[data-add-template-page-type]', updateUrlGenerators);\n}\n\n","﻿function updateAdditionalProperties(event) {\n    const type = $('#WidgetType').val();\n    $.get('/Admin/Widget/AddProperties', {type: type}, function (data) {\n        $(\"[data-additional-properties]\").html(data);\n        admin.initializePlugins();\n    });\n}\n\nexport function setupAddPageWidget() {\n    $(document).on('change', '[data-add-widget-form] #WidgetType', updateAdditionalProperties);\n    $('[data-add-widget-form] #WidgetType').change();\n}","﻿export function setupSimpleFiles(parent = document) {\n    $(parent).find('.delete-file-simple').confirmation().on('click', function (e) {\n        e.preventDefault();\n        sendPostRequest(e.target);\n    });\n}\n\nfunction sendPostRequest(el) {\n    const url = $(el).data('value');\n    $.ajax({\n        type: \"POST\",\n        url: url,\n        success: function () {\n            const fileList = $(document).find('#file-list-simple');\n            if (fileList) {\n                $.get('/Admin/MediaCategory/ShowFilesSimple/' + fileList.data('category-id'), function (response) {\n                    $(fileList).replaceWith(response);\n                    setupSimpleFiles('#file-list-simple');\n                });\n            }\n        }\n    });\n}","﻿export function setupSiteCopyOptions() {\n    function updateAllOptions(event) {\n        event.preventDefault();\n        var value = $(event.target).val();\n        $('[name^=\"sco-\"]').val(value);\n    }\n\n    $(function () {\n        $(document).on('change', '#copy-all', updateAllOptions);\n    });\n\n} ","﻿function ensureTargetIsSelf(event) {\n    $(event.target).removeAttr('target');\n}\nexport function setupResourceChooseSite(){\n    $(document).on('submit', '#resource-choose-site', ensureTargetIsSelf);\n\n}","function initialize(el) {\n    el.select2({\n        placeholder: \"Search for a webpage\",\n        minimumInputLength: 1,\n        ajax: { // instead of writing the function to execute the request we use Select2's convenient helper\n            url: \"/Admin/Webpage/Select2Search\",\n            data: function (params) {\n                return {\n                    term: params.term,\n                    page: params.page || 1\n                };\n            },\n            processResults: function (data, params) {\n                params.page = params.page || 1;\n\n                return {\n                    results: data.items,\n                    pagination: {\n                        more: (params.page * 10) < data.total\n                    }\n                };\n            }\n        },\n        templateResult: formatResult,\n        templateSelection: formatSelection,\n        escapeMarkup: function (m) {\n            return m;\n        }\n    });\n}\n\nfunction formatResult(item) {\n    if (item.loading) {\n        return item.text;\n    }\n\n    return `${item.text} ${item.id.length ? `(${item.id})` : ''}`;\n}\n\nfunction formatSelection(item) {\n    return `${item.text} ${item.id.length ? `(${item.id})` : ''}`;\n}\n\nexport function setupWebpageSelect2() {\n    $('[data-webpage-search-select2]').each(function (index, el) {\n        initialize($(el));\n    });\n    $(document).on('submit', '[data-webpage-search-form]', search);\n}\n\nfunction search(event) {\n    event.preventDefault();\n    let form = $(event.target);\n\n    $.post(form.attr('action'), form.serialize(), function(response) {\n        $('[data-webpage-search-results]').replaceWith(response);\n    });\n}","function getBlockHolder() {\n    return $('[data-content-admin-blocks]');\n}\n\nfunction getItemBlocks() {\n    return $('[data-admin-item-blocks-order]');\n}\n\nfunction getEditorHolder() {\n    return $('[data-content-admin-editor]');\n}\n\nfunction loadBlocks(url) {\n    const blocks = getBlockHolder();\n    if (!blocks.length) {\n        return;\n    }\n    url = url ?? $('[data-content-admin-blocks-current]').data('content-admin-blocks-current') ?? blocks.data('content-admin-blocks');\n    $.get(url, function (response) {\n        blocks.html(response);\n        InitSortBlocks();\n        InitToggleHideBlock();\n        InitSortItemBlocks();\n    })\n}\n\nfunction InitSortBlocks() {\n    const blocks = getBlockHolder();\n    if (!blocks.length) {\n        return;\n    }\n    blocks.children(\"ul\").sortable({\n        handle: \".sort-handle\",\n        update: function (event, ui) {\n            let sortList = [];\n            blocks.children(\"ul\").children(\"li[data-order]\").each(function (index, domElement) {\n                let order = index + 1;\n                $(domElement).data(\"order\", order);\n                sortList.push({\n                    id: $(domElement).data(\"id\"),\n                    order: order\n                });\n            });\n            let url = blocks.children(\"ul\").data(\"admin-blocks-order\");\n            $.post(url, {list: sortList})\n                .done(function (data) {\n                    reloadPreview();\n                })\n                .fail(function () {\n                    loadBlocks();\n                });\n        }\n    });\n}\n\nfunction InitSortItemBlocks() {\n    const itemBlocks = getItemBlocks();\n    if (!itemBlocks.length) {\n        return;\n    }\n\n    itemBlocks.each(function () {\n        let itemBlock = $(this);\n        itemBlock.sortable({\n            handle: \".child-sort-handle\",\n            update: function (event, ui) {\n                let sortList = [];\n                let blockId = $(event.target).closest('[data-id]').data(\"id\");\n                $(event.target).children(\"li[data-id]\").each(function (index, domElement) {\n                    let order = index + 1;\n                    sortList.push({\n                        id: $(domElement).data(\"id\"),\n                        order: order\n                    });\n                });\n                let url = $(event.target).data(\"admin-item-blocks-order\");\n                $.post(url, {id: blockId, list: sortList})\n                    .done(function (data) {\n                        reloadPreview();\n                        /*loadBlocks();*/ //uncomment for re-order ui again\n                    })\n                    .fail(function () {\n                        loadBlocks();\n                    });\n            }\n        });\n    });\n\n\n}\n\nfunction InitToggleHideBlock() {\n    const blocks = getBlockHolder();\n    if (!blocks.length) {\n        return;\n    }\n\n    blocks.find(\"[data-content-admin-block-hide]\").on(\"click\", function () {\n        let self = $(this);\n        let url = self.data(\"content-admin-block-hide\");\n        $.post(url, {id: self.data(\"id\")})\n            .done(function (data) {\n                loadBlocks();\n                reloadPreview();\n            });\n    });\n}\n\nfunction ToggleExpandBlock() {\n    const editor = getEditorHolder();\n    if (!editor.length) {\n        return;\n    }\n\n    if (editor.closest(\"[data-content-parent]\").hasClass(\"expand\")) {\n        collapseEditor();\n    } else {\n        expandEditor();\n    }\n}\n\nfunction loadEditor(url) {\n    const editor = getEditorHolder();\n    if (!editor.length) {\n        return;\n    }\n    if (url) {\n        editor.closest(\"[data-content-parent]\").removeClass(\"open\");\n        collapseEditor();\n        $.get(url, function (response) {\n            editor.html(response);\n            window.admin.initializePlugins();\n            editor.closest(\"[data-content-parent]\").addClass(\"open\");\n        })\n    } else {\n        editor.closest(\"[data-content-parent]\").removeClass(\"open\")\n        collapseEditor();\n        let blocks = getBlockHolder();\n        blocks.find('li.list-group-item-primary').removeClass('list-group-item-primary');\n    }\n}\n\nfunction hideEditor() {\n    const editor = getEditorHolder();\n    if (!editor.length) {\n        return;\n    }\n    editor.closest(\"[data-content-parent]\").removeClass(\"open\");\n    collapseEditor();\n\n    let blocks = getBlockHolder();\n    blocks.find('li.list-group-item-primary').removeClass('list-group-item-primary');\n}\n\nfunction expandEditor() {\n    const editor = getEditorHolder();\n    if (!editor.length) {\n        return;\n    }\n    editor.closest(\"[data-content-parent]\").addClass(\"expand\");\n    $('[data-content-admin-expand-editor] [data-expand]').addClass('d-none');\n    $('[data-content-admin-expand-editor] [data-collapse]').removeClass('d-none');\n}\n\nfunction collapseEditor() {\n    const editor = getEditorHolder();\n    if (!editor.length) {\n        return;\n    }\n    editor.closest(\"[data-content-parent]\").removeClass(\"expand\");\n    $('[data-content-admin-expand-editor] [data-expand]').removeClass('d-none');\n    $('[data-content-admin-expand-editor] [data-collapse]').addClass('d-none');\n}\n\nfunction loadEditorFromDataKeyUrl(link, dataKey) {\n    const url = link.data(dataKey);\n    if (!url) {\n        return false;\n    }\n\n    loadEditor(url);\n    return false;\n}\n\nfunction loadBlocksFromDataKeyUrl(link, dataKey) {\n    const url = link.data(dataKey);\n    if (!url) {\n        return false;\n    }\n\n    loadBlocks(url);\n    return false;\n}\n\nfunction openBlock(event) {\n    const link = $(event.currentTarget);\n    return loadBlocksFromDataKeyUrl(link, 'content-admin-block-open');\n}\n\nfunction closeBlock(event) {\n    const link = $(event.currentTarget);\n    return loadBlocksFromDataKeyUrl(link, 'content-admin-block-close');\n}\n\nfunction selectBlock(event) {\n    const link = $(event.currentTarget);\n    loadEditorFromDataKeyUrl(link, 'content-admin-editor')\n    loadBlocksFromDataKeyUrl(link, 'content-admin-block-select');\n    return false;\n}\n\nfunction mouseEnterBlock(event){\n    const link = $(event.currentTarget);\n    highlightPreviewBlock(link);\n}\n\nfunction mouseLeaveBlock(event){\n    clearHighlightPreviewBlock();\n}\n\nfunction clearHighlightPreviewBlock(){\n    let iframe = document.querySelector('[data-content-admin-preview-pane]');\n    if (iframe) {\n        let iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\n        if (iframeDocument) {\n            let allPreviewBlocks = iframeDocument.querySelectorAll('.mrcms-preview-block[data-content-block-id]');\n            $(allPreviewBlocks).removeClass('highlight');\n        }\n    }\n}\n\nfunction highlightPreviewBlock(element) {\n    let blockId = element.attr('data-id');\n    let iframe = document.querySelector('[data-content-admin-preview-pane]');\n    if (iframe) {\n        let iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\n        if (iframeDocument) {\n            let targetPreviewBlock = iframeDocument.querySelector(`.mrcms-preview-block[data-content-block-id=\"${blockId}\"]`);\n            if (targetPreviewBlock) {\n                $(targetPreviewBlock).addClass(\"highlight\");\n                targetPreviewBlock.scrollIntoView({\n                    behavior: 'smooth',\n                    block: 'center'\n                });\n            }\n        }\n    }\n}\n\n\n// function setContentPreviewBlockClick() {\n//     let iframe = document.querySelector('[data-content-admin-preview-pane]');\n//     if (iframe) {\n//         const parentDoc = parent.document;\n//\n//         $(iframe).contents().find(\"body\").append(`\n//         <script>\n//             let allPreviewBlocks= document.querySelectorAll('.mrcms-preview-block[data-content-block-id]');\n//             allPreviewBlocks.forEach(function(previewBlockItem){\n//                previewBlockItem.addEventListener('click',function(item){\n//                     console.log(item);\n//                 }); \n//             });\n//         </script>`);\n//\n//     }\n// }\n\nfunction removeBlock(event) {\n    const link = $(event.currentTarget);\n    if (confirm('Are you sure you want to delete this block?')) {\n        const url = link.data('content-admin-block-remove');\n        $.post(url, function () {\n            loadBlocks();\n            loadEditor();\n            reloadPreview();\n        });\n    }\n    return false;\n}\n\nfunction addChild(event) {\n    const link = $(event.currentTarget);\n    const url = link.data('content-admin-add-child');\n    $.post(url, function () {\n        loadBlocks();\n        loadEditor();\n        reloadPreview();\n    });\n    return false;\n}\n\nfunction reloadPreview() {\n    document.getElementById('content-admin-preview-pane').contentWindow.location.reload();\n}\n\nfunction saveEditor(event) {\n    const form = $(event.currentTarget);\n    const obj = form.serializeArray().reduceRight((prev, arr) => {\n        prev[arr.name] = arr.value;\n        return prev;\n    }, {});\n    const url = form.attr('action');\n    $.post(url, obj, function () {\n        loadBlocks();\n        loadEditor();\n        reloadPreview();\n        /*alert('success');*/\n    });\n\n    return false;\n}\n\nfunction updateContentEditor(e) {\n    let iframeSrc = new URL(this.src);\n    let targetUrl = this.contentWindow.location.href;\n    let currentUrl = iframeSrc.href;\n    if (targetUrl !== currentUrl) {\n        window.location = `/Admin/ContentVersion/EditByUrl?url=${targetUrl}`;\n    }\n    // else {\n    //     if (!$(this).attr('data-initiated')) {\n    //         setContentPreviewBlockClick();\n    //         $(this).attr('data-initiated', true);\n    //     }\n    // }\n}\n\nexport function setupContentAdmin() {\n    loadBlocks();\n\n    $(document).on('click', '[data-content-admin-block-open]', openBlock)\n    $(document).on('click', '[data-content-admin-block-close]', closeBlock)\n    $(document).on('click', '[data-content-admin-block-select]', selectBlock)\n    $(document).on('mouseenter', '[data-content-admin-nav] li[data-id]', mouseEnterBlock)\n    $(document).on('mouseover', '[data-content-admin-nav] li[data-id]', mouseEnterBlock)\n    $(document).on('mouseleave', '[data-content-admin-nav] li[data-id]', mouseLeaveBlock)\n    $(document).on('click', '[data-content-admin-block-remove]', removeBlock)\n    $(document).on('click', '[data-content-admin-add-child]', addChild)\n    $(document).on('submit', '[data-content-admin-save-editor]', saveEditor)\n    $(document).on('click', '[data-content-admin-hide-editor]', hideEditor)\n    $(document).on('click', '[data-content-admin-expand-editor]', ToggleExpandBlock);\n    $('[data-content-admin-preview-pane]').on('load', updateContentEditor);\n}","export function ajaxSetup() {\n    let requestVerificationToken = $('body').data('antiforgery-token');\n    $.ajaxSetup({\n        cache: false,\n        headers: {\n            'RequestVerificationToken' : requestVerificationToken\n        }        \n    });\n}\nexport function showHideLoading(){\n    $(document).ajaxStart(function () {\n        $(\"#loading\").show();\n    });\n    $(document).ajaxStop(function () {\n        $(\"#loading\").hide();\n    });\n}\n","import {ajaxSetup, showHideLoading} from './ajax-config'\nimport {setupConfirmation} from './setup-confirmation'\nimport {initializeBootstrapPlugins} from \"./initialize-bootstrap-plugins\";\nimport {setupGlobalization} from \"./setup-globalisation\";\nimport {setupDatePickers} from \"./setup-jquery-ui\";\nimport {setupAsyncPaging} from \"./async-paging\";\nimport {setupFeatherlight} from \"./setup-featherlight\";\nimport {initializePlugins, registerGlobalFunctions} from \"./initialize-plugins\";\nimport {registerPostToUrl} from \"./post-to-url\";\nimport {postToUrlHelper} from \"./post-to-url\";\nimport {setupResizeModal} from \"./resize-modal\";\nimport {registerDelayKeyup} from \"./delay-keyup\";\nimport {registerPlugins} from './media-selector';\nimport {setupHealthChecks} from \"./health-checks\";\nimport {registerUpdateArea} from \"./update-area\";\nimport {setupAddWebpage} from \"./add-webpage\";\nimport {setupWebpageTree} from \"./pages\";\nimport {setupEditWebpage} from \"./edit-webpage\";\nimport {setupMediaCategoryPage } from \"./media-category\";\nimport {initMediaUploader, MediaUploader } from './media-uploader';\nimport {setupLayoutTree} from \"./layout\";\nimport {setupMenu} from \"./menu\";\nimport {setupStickyTabs} from \"./sticky-tabs\";\nimport {setupUserAvatar} from \"./user-avatar\";\nimport {setupTransientNotifications} from \"./transient-notifications\";\nimport {setupNotificationBar} from \"./persistent-notifications\";\nimport {setupRegistrationsAdminReport} from \"./user-registrations-report\";\nimport {setupMediaCategory} from \"./add-category\";\nimport {setupSiteSearch} from \"./search\";\nimport {setupFormBuilder} from \"./form-builder\"\nimport {setupMessageTemplateEditor} from \"./message-template\"\nimport {setupMessageTemplatePreview} from \"./message-template\"\nimport {setupAddPageTemplate} from \"./add-page-template\";\nimport {setupSortForm} from \"./form-sort\";\nimport {setupAddPageWidget} from \"./add-page-widget\";\nimport {setupSimpleFiles} from \"./media-show-files-simple\";\nimport {setupSiteCopyOptions} from \"./add-site\"\nimport {setupBatchFunctions} from \"./batch.js\"\nimport {setupResourceChooseSite} from \"./choose-site\";\nimport {setupWebpageSelect2} from \"./webpage-search\";\nimport {setupContentAdmin} from \"./content-admin\";\najaxSetup();\n$(() => {\n    registerPlugins();\n    setupConfirmation();\n    showHideLoading();\n    initializeBootstrapPlugins()\n    setupGlobalization()\n    setupAsyncPaging();\n    setupFeatherlight()\n    registerPostToUrl();\n    setupResizeModal()\n    registerDelayKeyup();\n    setupHealthChecks();\n    registerUpdateArea();\n    setupAddWebpage();\n    setupEditWebpage();\n    setupWebpageTree();\n    setupLayoutTree();\n    setupMediaCategory();\n    initMediaUploader();\n    setupDatePickers();\n    setupMediaCategoryPage();\n    registerGlobalFunctions();\n    setupTransientNotifications();\n    setupMenu();\n    setupStickyTabs();\n    setupUserAvatar();\n    setupRegistrationsAdminReport();\n    setupNotificationBar();\n    postToUrlHelper();\n    setupSiteSearch();\n    setupFormBuilder();\n    setupMessageTemplateEditor();\n    setupMessageTemplatePreview();\n    setupAddPageTemplate();\n    setupSortForm();\n    setupAddPageWidget();\n    setupSiteCopyOptions();\n    setupBatchFunctions();\n    setupResourceChooseSite();\n    setupWebpageSelect2();\n\n    let mediaUploader = new MediaUploader($(document), {\n\n    });\n    mediaUploader.init();\n\n    //Default theme for select2 (Bootstrap 4)\n    $.fn.select2.defaults.set(\"theme\", \"bootstrap4\");\n\n    if (Dropzone) {\n        Dropzone.autoDiscover = false;\n    }\n\n    $(document).on('click', 'a.more-link', function () {\n        return false;\n    });\n\n    $(document).on('change', '#admin-site-selector', function () {\n        location.href = $(this).val();\n    });\n\n\n    initializePlugins();\n\n    setupSimpleFiles();\n    \n    setupContentAdmin();\n})\n","﻿import {initTree} from \"./tree-setup\";\n\nexport function setupBatchFunctions() {\n    var batchHandler = function () {\n        function refreshRun(id) {\n            var elements = $('[data-batch-run-id=' + id + ']');\n            refreshElements(elements);\n        }\n\n        function startBatch(event) {\n            var batchRunId = $(event.target).data('batch-run-id');\n            $.post('/admin/batchrun/start/' + batchRunId, function () {\n                refreshRun(batchRunId);\n            });\n        }\n\n        function pauseBatch(event) {\n            var batchRunId = $(event.target).data('batch-run-id');\n            $.post('/admin/batchrun/pause/' + batchRunId, function () {\n                refreshRun(batchRunId);\n            });\n        }\n\n        function refreshElements(elements) {\n            elements.each(function (index, el) {\n                var element = $(el);\n                var refreshUrl = element.data('refresh-url');\n                if (refreshUrl) {\n                    $.get(refreshUrl, function (response) {\n                        element.replaceWith(response);\n                    });\n                }\n            });\n        }\n\n        function updateResult(id) {\n            var elements = $('[data-batch-run-result-id=' + id + ']');\n            refreshElements(elements);\n        }\n\n        function updateRun(runInfo) {\n            var id = runInfo.id;\n            $('[data-batch-run-status=' + id + ']').html(runInfo.status);\n            var completionStatus = runInfo.completionStatus;\n            $('[data-batch-run-progress-bar=' + id + ']').css('width', completionStatus.percentageCompleted);\n            if ($('[data-batch-run-progress-bar=' + id + ']').length) {\n                if (runInfo.status === 'Executing') {\n                    $('title').text(completionStatus.percentageCompleted + ' Batch #' + id + ' - Executing');\n                } else if (runInfo.status === 'Complete') {\n                    $('title').text('Complete: Batch #' + id);\n                }\n            }\n            $('[data-batch-run-full-status=' + id + ']').html(completionStatus.fullStatus);\n            $('[data-batch-run-average-time-taken=' + id + ']').html(completionStatus.averageTimeTaken);\n            $('[data-batch-run-time-taken=' + id + ']').html(completionStatus.timeTaken);\n            $('[data-batch-run-pending=' + id + ']').html(completionStatus.pending);\n            $('[data-batch-run-succeeded=' + id + ']').html(completionStatus.succeeded);\n            $('[data-batch-run-time-remaining=' + id + ']').html(completionStatus.estimatedTimeRemaining);\n            $('[data-batch-run-failed=' + id + ']').html(completionStatus.failed);\n        }\n\n        function updateJob(id) {\n            var elements = $('[data-batch-job-id=' + id + ']');\n            refreshElements(elements);\n        }\n\n        function init() {\n            $(document).on('click', '[data-batch-run-start]', startBatch);\n            $(document).on('click', '[data-batch-run-pause]', pauseBatch);\n            var connection = new signalR.HubConnectionBuilder()\n                .withUrl('/batchHub')\n                .configureLogging(signalR.LogLevel.Warning)\n                .build();\n            connection.start().catch(err => console.error(err.toString()));\n            connection.on('updateResult', updateResult);\n            connection.on('updateRun', updateRun);\n            connection.on('updateJob', updateJob);\n            connection.on('refreshBatchRunUI', refreshRun);\n        }\n\n        return {\n            init: init\n        }\n    };\n\n    $('[data-batch-run]').each((index, element) => {\n        new batchHandler().init();\n    })\n}","export function initializeBootstrapPlugins(){\n    $().dropdown();\n    $(\"[rel='tooltip']\").tooltip();\n}","export function setupGlobalization(){\n    Globalize.culture($(\"body\").data(\"current-ui-culture\"));\n    \n    $.validator.methods.number = function (value, element) {\n        return this.optional(element) ||\n            !isNaN(Globalize.parseFloat(value));\n    };\n\n    $.validator.methods.date = function (value, element) {\n        return this.optional(element) ||\n            !isNaN(Globalize.parseDate(value));\n    };\n}","export function registerDelayKeyup() {\n    $.fn.delayKeyup = function (e, callback, ms) {\n        let timer = 0;\n        $(this).keyup(function (event) {\n            clearTimeout(timer);\n            timer = setTimeout(function () {\n                callback(event);\n            }, ms);\n        });\n        return $(this);\n    };\n}\n","﻿import {initTree} from \"./tree-setup\";\n\n\nexport function setupWebpageTree() {\n    $('[data-webpage-tree]').each((index, element) => {\n        initTree($(element), 'webpage-tree', '/Admin/Navigation/WebSiteTree');\n    })\n}","﻿import {initTree} from \"./tree-setup\";\n\nexport function setupLayoutTree() {\n    $('[data-layout-tree]').each((index, element) => {\n        initTree($(element), 'layout-tree', '/Admin/Navigation/LayoutTree');\n    })\n}\n","export function setupDatePickers(){\n    $.datepicker.setDefaults( $.datepicker.regional[ $('html').attr('lang') ] );\n    \n    $(\".datepicker\").datepicker();\n    $(document).on('click', '.date-time-picker', function () {\n        const that = $(this);\n        if (!that.hasClass('hasDatepicker')) {\n            let timeFormat = $.datepicker._defaults.timeFormat;\n            if (!timeFormat) {\n                timeFormat = 'HH:mm';\n            }\n            that.datetimepicker({\n                timeFormat: timeFormat\n            }).blur().focus(); \n        }\n    });\n\n}","\nexport function setupRegistrationsAdminReport(){\n\n        $(\"[data-total-registrations]\").each((index, element) => {\n            const $el = $(element);\n            const data = $el.data('total-registrations');\n\n            const config = {\n                type: 'bar',\n                data: {\n                    labels: data.map(x=>x.Date),\n                    datasets: [{\n                        label: 'Number of registrations',\n                        backgroundColor: '#007bff',\n                        borderColor: '#007bff',\n                        data: data.map(x=>x.Count)\n                    }],                    \n                },\n                options: {\n                    title: {\n                        display: true,\n                        text: 'User Registrations'\n                    },\n                    tooltips: {\n                        mode: 'index',\n                        intersect: false,\n                    },\n                    hover: {\n                        mode: 'nearest',\n                        intersect: true\n                    },\n                    scales: {\n                        xAxes: [{\n                            display: true,\n                            scaleLabel: {\n                                display: true,\n                                labelString: 'Date'\n                            }\n                        }],\n                        yAxes: [{\n                            display: true,\n                            scaleLabel: {\n                                display: true,\n                                labelString: 'Count'\n                            },\n                            ticks: {\n                                beginAtZero: true,\n                                precision: 0,\n                            }\n                        }]\n                    }\n                }\n            };\n\n            const ctx = element.getContext('2d');\n            const chart = new Chart(ctx, config);\n        });\n    \n}","﻿export function setupSiteSearch() {\n    (function ($) {\n        const options = {\n            source: function (request, response) {\n                const type = itemType.val();\n                $.get('/Admin/TextSearch/QuickSearch', {\n                    term: request.term,\n                    type: type\n                }, response);\n            },\n            minLength: 2,\n            delay: 400,\n            select: function (event, ui) {\n                if (ui.item) {\n                    location.href = getUrl(ui.item);\n                }\n            }\n        };\n        let autoComplete, autoCompleteElement, itemType;\n        $(function () {\n            autoCompleteElement = $(\"[data-search-item-term]\");\n            autoComplete = autoCompleteElement.autocomplete(options).data(\"ui-autocomplete\");\n            if (autoComplete != null) {\n                autoComplete._renderItem = renderItem;\n                autoComplete._renderMenu = renderMenu;\n            }\n            itemType = $('[data-search-item-type]');\n            itemType.on('change', function () {\n                autoCompleteElement.trigger('focus');\n            });\n            autoCompleteElement.on('focus', function () {\n                autoComplete.search($(this).val());\n            });\n        });\n\n        function getUrl(item) {\n            if (item.actionUrl)\n                return item.actionUrl;\n            return '/Admin';\n        }\n\n        function renderItem(ul, item) {\n            let text = item.label;\n            if (item.displayType)\n                text += ' (' + item.displayType + ')';\n            const actionLink = $('<a>').attr('href', item.actionUrl).html(text);\n            const li = $('<li>').html(actionLink);\n            return li.appendTo(ul);\n        }\n\n        function renderMenu(ul, items) {\n            const that = this;\n            $.each(items, function (index, item) {\n                if (index > 0) {\n                    $('<li>').appendTo(ul);\n                }\n                that._renderItemData(ul, item);\n            });\n        }\n\n    })(jQuery);\n}\n","﻿export function setupFormBuilder() {\n    $(function () {\n        var element = $('.submit-form-btn');\n        if (element.length > 0) {\n            element.on('click', function (e) {\n                if ($('form').valid()) {\n                    e.preventDefault();\n                    let $form = $('.form-update-form');\n                    $.post($form.attr('action'),\n                        $form.serialize(), function (response) {\n                            if (response.success) {\n                                var tab = parent.$('#form-properties-data');\n                                $.get(tab.data('reload-url'),\n                                    function (response) {\n                                        tab.replaceWith(response);\n                                        parent.$.featherlight.close();\n                                    });\n                            } else {\n                                alert(response.message);\n                            }\n                        });\n                }\n\n                return false;\n            });\n            $('form.form-update-form input').keypress(function (e) {\n                if (e.which === 13) {\n                    e.preventDefault();\n                    $('.submit-form-btn').click();\n                }\n            });\n        }\n    })\n}","﻿export function setupSortForm() {\n    $(\"[data-form-sort-form] #sortable\").sortable({\n        update: function (event, ui) {\n            $('#sortable li').each(function (index, domElement) {\n                $(domElement).find('[name*=\"Order\"]').val(index);\n            });\n        }\n    });\n\n    $(\"[data-form-sort-form] #submit\").click(function (e) {\n        e.preventDefault();\n        const form = $('#sort-fields-form');\n        $.ajax({\n            data: form.serialize(),\n            dataType: \"json\",\n            url: \"/Admin/Form/Sort\",\n            type: \"POST\",\n            beforeSend: function () {\n            },\n            complete: function () {\n                window.parent.location.reload(false);\n            },\n            success: function (result) {\n            },\n            error: function (result) {\n                //alert(\"Could not sort fields\");\n            }\n        });\n    });\n\n}"],"names":["$504f47cb2ec6b592$export$6c5a86cbd779a7bd","path","params","method","form","document","createElement","key","setAttribute","hiddenField","appendChild","value","$","data","antiForgery","body","submit","$a7fbca18141e5f06$export$cdefefb163d45c4f","confirmation","on","e","preventDefault","el","deleteUrl","id","deleteFromConfirmation","target","$cd7397e654cec756$var$getResults","event","self","get","this","href","response","parents","replaceWith","$cd7397e654cec756$var$updateResults","find","serialize","$a5142fc6ba419d32$var$MrCMSFeatherlightSettings","type","iframeWidth","afterOpen","$a5142fc6ba419d32$export$e4550f68d4f2877a","$instance","beforeOpen","onResize","autoHeight","$content","css","contents","scrollHeight","offset","scrollTop","top","left","$a5142fc6ba419d32$export$6bbec919983723a9","link","attr","featherlight","click","$a5142fc6ba419d32$export$e000e0fba29fb14e","featherlightSettings","extend","filter","$92e47b33f416d6b3$var$uploader","options","element","requestVerificationToken","settings","$92e47b33f416d6b3$var$defaults","init","upload","fileUploadSelector","length","acceptFileTypes","val","uploadUrlSelector","dropZoneElement","maxFileSize","maxFilesize","window","Dropzone","forElement","destroy","myDropzone","url","acceptedFiles","timeout","dictDefaultMessage","parallelUploads","headers","RequestVerificationToken","file","onFileUploadStopped","progressBarSelector","hide","trigger","progressBar","showMessage","totalPercentage","totalBytesToBeSent","totalBytesSent","show","progressBarSelectorInner","percentCompleteSelector","html","parseInt","noty","text","status","layout","allowedFileTypes","sequentialUploads","filesSelector","uploadMediaCategoryIdSelector","$92e47b33f416d6b3$export$cf501767255555fd","MediaUploader","defaults","$92e47b33f416d6b3$export$f14dd84d35b3f67","$381d86c332d9fec9$export$be211df7b1eeb33e","CKEDITOR","replaceAll","ev","location","parent","mediaSelector","form1","removeData","each","index","validator","unobtrusive","parse","tagit","autocomplete","delay","minLength","source","request","term","getJSON","split","pop","showAutocompleteOnFocus","singleField","placeholderText","allowSpaces","spectrum","preferredFormat","showInput","areYouSure","message","_","$element","sortable","update","ui","domElement","$48fc3c42ce5ba0ce$var$resizeModal","jqElement","undefined","classList","modal","hasClass","height","outerHeight","windowHeight","width","outerWidth","$07b96c218053a97e$var$MediaSelector","jQuery","timer","mediaUploader","hideResult","result","mediaResultSelector","slideUp","removeAttr","deselectAll","submitForm","formSelector","updateResults","changePage","newResults","resultsHolderSelector","initializeMediaUploader","selectFile","selected","fileValue","onSelected","info","dropzone","removeAllFiles","jQ","selectorUrl","remove","mediaToggleSelector","thisElement","not","slideDown","toggle","clearTimeout","setTimeout","getSettings","$07b96c218053a97e$var$MediaSelectorWrapper","preview","removeButton","selectButton","buttonHolder","eventsRegistered","getValue","showSaved","inputElement","formGroup","closest","addClass","removeClass","removeSuccess","updateAlt","input","post","updateAltUrl","updateDescription","updateDescriptionUrl","getPreview","valueIsSet","image","extension","toLowerCase","imageExtensions","imageCheck","i","isImage","holder","imageCol","append","dataCol","altFormGroup","altId","altLabel","altInput","altFeedback","altUrl","alt","getAltInput","descriptionFormGroup","descriptionId","descriptionLabel","descriptionInput","descriptionFeedback","descriptionUrl","description","getDescriptionInput","appendTo","noImageSelectedImage","previewStyle","is","para","before","selectClasses","selectMessage","removeClasses","removeMessage","after","registerEvents","reset","newPreview","setValue","name","close","$4bcb4fbb67ab6134$var$setResult","row","statusCell","icon","rowClass","$4bcb4fbb67ab6134$var$processRow","messagesCell","$4bcb4fbb67ab6134$var$onSuccess","$4bcb4fbb67ab6134$var$onFailure","$4bcb4fbb67ab6134$var$onWarning","$4bcb4fbb67ab6134$var$onNA","messages","ul","$4bcb4fbb67ab6134$var$showMessages","$ca1258e04a49edaa$var$updateArea","area","areaName","selector","admin","initializePlugins","$2564014939cef3ff$var$previousValue","$2564014939cef3ff$var$timer","$2564014939cef3ff$var$getCurrentValue","scope","mode","webpageType","template","$2564014939cef3ff$var$updateUrl","currentValue","$2564014939cef3ff$var$areValuesChanged","pageName","parentId","useHierarchy","console","log","$2564014939cef3ff$var$suggestUrl","$2564014939cef3ff$var$delayedUpdateUrl","$2564014939cef3ff$var$triggerKeyUp","keyup","$2564014939cef3ff$var$logCurrentValue","$2564014939cef3ff$var$updateAdditionalProperties","templateId","$2564014939cef3ff$export$b2bacdf070bf1970","$b53c1ee3367bd628$var$getId","node","$b53c1ee3367bd628$var$menuItems","items","menuRules","$b53c1ee3367bd628$export$b1432670dab450da","jstree","core","animation","check_callback","cache","state","hostname","contextmenu","plugins","clicked","$150fda6da4b02863$export$2c32a423c741e43b","setDefaults","ignore","setPermissionVisibility","hasCustomPermissions","customPermissions","permissionType","showCustomPermissions","permissionTypeValue","blur","that","trim","replace","store","set","pathname","change","tab","toString","indexOf","availableTags","tagLimit","which","SEOTargetPhrase","$362f13fb45ea63c6$export$493b4ea65cc6cb50","fileList","folderClass","fileToolsContainer","uiSelectedClass","fileClass","cutFilesBtn","deleteFilesBtn","pasteFilesBtn","filesStorageKey","cutFilesStorageKey","clearFilesBtn","fileCutClass","selectable","stop","selectedStop","cancel","clearSelectedFiles","clearCutStyles","setSelectedFileData","setCutFileData","disableCut","disableDelete","disablePaste","copyCutFilesToStorage","paste","swal","title","showCancelButton","confirmButtonColor","confirmButtonText","closeOnConfirm","deleteFiles","setSelectedFiles","filesAndFolders","getSelectedFileData","files","$362f13fb45ea63c6$var$isFileId","join","$362f13fb45ea63c6$var$replaceAll","folders","$362f13fb45ea63c6$var$isFolderId","ajax","success","alert","setButtonState","getCutFileData","folderId","enablePaste","setOpacityOnCutFiles","fileIds","number","map","cutFiles","enableCut","enableDelete","str","RegExp","$bba56d84d2c373ca$export$1e6417d343c03b1","canAddChild","addMenuItem","label","action","controller","sortMenuItem","$b53c1ee3367bd628$var$getParentId","isNaN","editMenuItem","candelete","deleteMenuItem","$024cd6d1315008ef$var$pushMenuTarget","$024cd6d1315008ef$var$pushMenuState","$024cd6d1315008ef$var$mrcmsOpenMenuItems","$024cd6d1315008ef$var$logOpenMenus","$024cd6d1315008ef$export$7120c31117304a49","keys","$024cd6d1315008ef$var$openNavItems","PushMenu","$024cd6d1315008ef$var$setupNav","$22d159e80c9e7e85$export$92e41e848e50d5fb","currentTab","hash","eq","$22d159e80c9e7e85$var$setActiveTab","currentTarget","$22d159e80c9e7e85$var$persistTab","$395d6e8c3052d499$export$e98f3dd68ecebb79","chooseImage","getElementById","filename","contenttype","avatar","cropper","$progress","$alert","$modal","addEventListener","tooltip","reader","done","src","URL","createObjectURL","FileReader","onload","readAsDataURL","Cropper","aspectRatio","viewMode","canvas","getCroppedCanvas","toDataURL","toBlob","blob","formData","FormData","processData","contentType","fadeOut","$93ced84d8e61fd9e$var$showNotification","notification","date","$93ced84d8e61fd9e$export$e42ac550ebeb0d9b","connection","signalR","HubConnectionBuilder","withUrl","configureLogging","LogLevel","Warning","build","start","catch","err","error","$44c05bc1a70c49a8$export$37805a2c27f4a51f","PersistentNotifications","prependNotification","updateLocalStorage","listContainer","prepend","displayNotification","notifications","getNotificationsLocalStorage","push","shift","updateNotificationsLocalStorage","updateNotificationCountLocalStorage","updateNotificationCount","resetNotifications","empty","displayNoNotifications","navContainer","count","localStorage","setItem","JSON","stringify","getItem","removeItem","reverse","idx","initializeNotifications","$5277e2d31ef7ba0a$export$2027d51bd1c05138","fn","delayKeyup","callback","ms","parentUrl","setStandardUrl","validate","$200b40a0fef2cf50$export$505eb13fd6687f4f","match","PreviewMessageTemplate","$e16853e2e01b13e7$var$updateUrlGenerators","$e16853e2e01b13e7$var$setUrlGeneratorValues","$el","option","$fec20067b52de327$var$updateAdditionalProperties","$a9a4247d95226fa5$export$aa38e18b1ba35d4c","$a9a4247d95226fa5$var$sendPostRequest","$263fd7c2f0c64f7b$export$ebcb0328f71482f","updateAllOptions","$30dff0bfe333fc4f$var$ensureTargetIsSelf","$82c8292555b77a47$var$formatResult","item","loading","$82c8292555b77a47$var$formatSelection","$82c8292555b77a47$export$d5bfea9aef3de43e","select2","placeholder","minimumInputLength","page","processResults","results","pagination","more","total","templateResult","templateSelection","escapeMarkup","m","$82c8292555b77a47$var$initialize","$82c8292555b77a47$var$search","$432cefb1e6a39c53$var$getBlockHolder","$432cefb1e6a39c53$var$getEditorHolder","$432cefb1e6a39c53$var$loadBlocks","blocks","children","handle","sortList","order","list","$432cefb1e6a39c53$var$reloadPreview","fail","$432cefb1e6a39c53$var$InitSortBlocks","$432cefb1e6a39c53$var$InitToggleHideBlock","itemBlocks","blockId","$432cefb1e6a39c53$var$InitSortItemBlocks","$432cefb1e6a39c53$var$ToggleExpandBlock","editor","$432cefb1e6a39c53$var$collapseEditor","$432cefb1e6a39c53$var$expandEditor","$432cefb1e6a39c53$var$loadEditor","$432cefb1e6a39c53$var$hideEditor","$432cefb1e6a39c53$var$loadBlocksFromDataKeyUrl","dataKey","$432cefb1e6a39c53$var$openBlock","$432cefb1e6a39c53$var$closeBlock","$432cefb1e6a39c53$var$selectBlock","$432cefb1e6a39c53$var$loadEditorFromDataKeyUrl","$432cefb1e6a39c53$var$mouseEnterBlock","iframe","querySelector","iframeDocument","contentDocument","contentWindow","targetPreviewBlock","scrollIntoView","behavior","block","$432cefb1e6a39c53$var$highlightPreviewBlock","$432cefb1e6a39c53$var$mouseLeaveBlock","allPreviewBlocks","querySelectorAll","$432cefb1e6a39c53$var$clearHighlightPreviewBlock","$432cefb1e6a39c53$var$removeBlock","confirm","$432cefb1e6a39c53$var$addChild","reload","$432cefb1e6a39c53$var$saveEditor","obj","serializeArray","reduceRight","prev","arr","$432cefb1e6a39c53$var$updateContentEditor","iframeSrc","targetUrl","ajaxSetup","batchHandler","MediaSelector","methods","apply","Array","prototype","slice","call","arguments","mediaSelectorPopup","ajaxStart","ajaxStop","dropdown","Globalize","culture","optional","parseFloat","parseDate","postToUrl","resize","resizeModal","datepicker","regional","timeFormat","_defaults","datetimepicker","focus","config","labels","x","Date","datasets","backgroundColor","borderColor","Count","display","tooltips","intersect","hover","scales","xAxes","scaleLabel","labelString","yAxes","ticks","beginAtZero","precision","ctx","getContext","Chart","itemType","select","actionUrl","autoComplete","autoCompleteElement","renderItem","displayType","actionLink","renderMenu","_renderItemData","_renderItem","_renderMenu","search","valid","$form","response1","keypress","templateBody","fullPage","allowedContent","dataType","beforeSend","complete","refreshRun","refreshElements","startBatch","batchRunId","pauseBatch","elements","refreshUrl","updateResult","updateRun","runInfo","completionStatus","percentageCompleted","fullStatus","averageTimeTaken","timeTaken","pending","succeeded","estimatedTimeRemaining","failed","updateJob","autoDiscover"],"version":3,"file":"admin.js.map"}